(function(){var c=0,a=[];var b={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,extend:function(g){var e,f,d;for(d=1;d<arguments.length;d++){f=arguments[d];for(e in f){g[e]=f[e]}}return g},cleanName:function(d){var e,f;f=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(e=0;e<f.length;e+=2){d=d.replace(f[e],f[e+1])}d=d.replace(/\s+/g,"_");d=d.replace(/[^a-z0-9_\-\.]+/gi,"");return d},addRuntime:function(d,e){e.name=d;a[d]=e;a.push(e);return e},guid:function(){var d=new Date().getTime().toString(32),e;for(e=0;e<5;e++){d+=Math.floor(Math.random()*65535+c).toString(32)}return d},formatSize:function(d){if(d>1048576){return Math.round(d/1048576,1)+" MB"}if(d>1024){return Math.round(d/1024,1)+" KB"}return d+" b"},getPos:function(g,e){var d=0,h=0,f;g=g;e=e||document.body;f=g;while(f&&f!=e&&f.nodeType){d+=f.offsetLeft||0;h+=f.offsetTop||0;f=f.offsetParent}f=g.parentNode;while(f&&f!=e&&f.nodeType){d-=f.scrollLeft||0;h-=f.scrollTop||0;f=f.parentNode}return{x:d,y:h}},parseSize:function(d){var e;if(typeof(d)=="string"){d=/^([0-9]+)([mgk]+)$/.exec(d.toLowerCase().replace(/[^0-9mkg]/g,""));e=d[2];d=parseInt(d[1]);if(e=="g"){d*=1073741824}if(e=="m"){d*=1048576}if(e=="k"){d*=1024}}return d},xmlEncode:function(e){var d={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"};return e?(""+e).replace(/[<>&\"\']/g,function(f){return d[f]?"&"+d[f]+";":f}):e},toArray:function(f){var e,d=[];for(e=0;e<f.length;e++){d[e]=f[e]}return d}};b.Uploader=function(f){var e={},i,h=[],j;i=new b.QueueProgress();f=b.extend({chunk_size:"1mb",max_file_size:"1gb",multi_selection:true},f);function g(){var k;if(this.state==b.STARTED&&j<h.length){k=h[j++];if(k.status==b.QUEUED){this.trigger("UploadFile",k)}else{g.call(this)}}else{this.stop()}}function d(){var k;i.reset();for(k=0;k<h.length;k++){i.size+=h[k].size;i.loaded+=h[k].loaded;if(h[k].status==b.DONE){i.uploaded++}else{if(h[k].status==b.FAILED){i.failed++}else{i.queued++}}}i.percent=i.size>0?Math.ceil(i.loaded/i.size*100):0}b.extend(this,{state:b.STOPPED,files:h,settings:f,total:i,id:b.guid(),init:function(){var m,l,k;f.page_url=f.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(f.url)){f.url=f.page_url+f.url}f.chunk_size=b.parseSize(f.chunk_size);f.max_file_size=b.parseSize(f.max_file_size);if(f.runtimes){l=f.runtimes.split(",");for(m=0;m<l.length;m++){runtime=a[l[m]];if(runtime&&runtime.isSupported()!==false){this.runtime=runtime;this.trigger("PreInit",runtime.name);break}}}else{for(m=0;m<a.length;m++){runtime=a[m];if(runtime&&runtime.isSupported()!==false){this.runtime=runtime;this.trigger("PreInit",runtime.name);break}}}this.bind("FilesSelected",function(n,q){var p,o;for(p=0;p<q.length;p++){o=q[p];o.loaded=0;o.percent=0;if(q[p].size>f.max_file_size){o.status=b.FAILED}else{o.status=b.QUEUED}h.push(o)}this.trigger("QueueChanged")});this.bind("UploadProgress",function(n,o){if(o.status==b.QUEUED){o.status=b.UPLOADING}o.percent=o.size>0?Math.ceil(o.loaded/o.size*100):0;d()});this.bind("QueueChanged",d);this.bind("FileUploaded",function(n,o){o.status=b.DONE;n.trigger("UploadProgress",o);g.call(this)});if(this.runtime){this.runtime.init(this);this.trigger("Init",this.runtime.name)}},browse:function(k){this.trigger("SelectFiles",b.extend({},f,k))},start:function(){if(this.state!=b.STARTED){j=0;this.state=b.STARTED;this.trigger("StateChanged");g.call(this)}},stop:function(){if(this.state!=b.STOPPED){this.state=b.STOPPED;this.trigger("StateChanged")}},getFile:function(l){var k;for(k=h.length-1;k>=0;k--){if(h[k].id===l){return h[k]}}},removeFile:function(l){var k;for(k=h.length-1;k>=0;k--){if(h[k].id===l.id){h.splice(k,1);this.trigger("FileRemoved",l)}}this.trigger("QueueChanged")},removeAll:function(){var l,k;for(l=h.length-1;l>=0;l--){k=h[l];h.splice(l,1);this.trigger("FileRemoved",k)}this.trigger("QueueChanged")},trigger:function(k){var m=e[k.toLowerCase()],l;if(m){arguments[0]=this;for(l=0;l<m.length;l++){if(m[l].func.apply(m[l].scope,arguments)===false){return false}}}return true},bind:function(k,m,l){var n;k=k.toLowerCase();n=e[k]||[];n.push({func:m,scope:l||this});e[k]=n},unbind:function(k,m){var n=e[k.toLowerCase()],l;if(n){for(l=n.length-1;l>=0;l--){if(n[l].func===m){n.splice(l,1)}}}}})};b.File=function(g,d,f){var e=this;e.id=g;e.name=d;e.size=f;e.loaded=0;e.percent=0;e.status=0};b.Runtime=function(){this.isSupported=function(){};this.init=function(d){}};b.QueueProgress=function(){var d=this;d.size=0;d.loaded=0;d.uploaded=0;d.failed=0;d.queued=0;d.percent=0;d.reset=function(){d.size=d.loaded=d.uploaded=d.failed=d.queued=d.percent=0}};window.plupload=b})();(function(a){var b={};a.GearsRuntime=a.addRuntime("gears",{isSupported:function(){return !!(window.google&&google.gears)},init:function(c){c.bind("UploadFile",function(d,h){var g=0,j,i,f=0;i=d.settings.chunk_size;j=Math.ceil(h.size/i);e();function e(){var k=d.settings.url,l,m;if(h.status==a.DONE||h.status==a.FAILED||d.state==a.STOPPED){return}m=Math.min(i,h.size-(g*i));l=google.gears.factory.create("beta.httprequest");l.open("POST",k+(k.indexOf("?")==-1?"?":"&")+"name="+escape(h.target_name||h.name)+"&chunk="+g+"&chunks="+j);l.setRequestHeader("Content-Disposition",'attachment; filename="'+h.name+'"');l.setRequestHeader("Content-Type","application/octet-stream");l.upload.onprogress=function(n){h.loaded=f+n.loaded;d.trigger("UploadProgress",h)};l.onreadystatechange=function(){var n;if(l.readyState==4){if(l.status==200){n={file:h,chunk:g,chunks:j,response:l.responseText};d.trigger("ChunkUploaded",n);if(n.cancelled){h.status=a.FAILED;d.trigger("FileUploaded",h);return}f+=m;if(++g>=j){h.status=a.DONE;d.trigger("FileUploaded",h)}else{e()}}else{d.trigger("UploadChunkError",{file:h,chunk:g,chunks:j,error:"Status: "+l.status})}}};if(g<j){l.send(b[h.id].slice(g*i,m))}}});c.bind("SelectFiles",function(d){var f=google.gears.factory.create("beta.desktop"),h=[],g,e;for(g=0;g<d.settings.filters.length;g++){ext=d.settings.filters[g].extensions.split(";");for(e=0;e<ext.length;e++){h.push(ext[e].replace(/^[^.]+\./,"."))}}f.openFiles(function(l){var k,j,m=[],n;for(j=0;j<l.length;j++){k=l[j];n=a.guid();b[n]=k.blob;m.push(new a.File(n,k.name,k.blob.length))}c.trigger("FilesSelected",m)},{singleFile:!d.settings.multi_selection,filter:h})})}})})(plupload);(function(b){var a={};function c(n){var p=false;var d=null;try{var j=null;try{j=new ActiveXObject("AgControl.AgControl");if(n==null){p=true}else{if(j.IsVersionSupported(n)){p=true}}j=null}catch(m){var k=navigator.plugins["Silverlight Plug-In"];if(k){if(n===null){p=true}else{var f=k.description;if(f==="1.0.30226.2"){f="2.0.30226.2"}var g=f.split(".");while(g.length>3){g.pop()}while(g.length<4){g.push(0)}var h=n.split(".");while(h.length>4){h.pop()}var o,i,l=0;do{o=parseInt(h[l]);i=parseInt(g[l]);l++}while(l<h.length&&o===i);if(o<=i&&!isNaN(o)){p=true}}}}}catch(m){p=false}return p}b.silverlight={trigger:function(h,e){var g=a[h],f,d;if(g){d=b.toArray(arguments).slice(1);d[0]="Silverlight:"+e;setTimeout(function(){g.trigger.apply(g,d)},0)}}};b.SilverlightRuntime=b.addRuntime("silverlight",{isSupported:function(){return c("2.0.31005.0")},init:function(f){var e;a[f.id]=f;e=document.createElement("div");e.id=f.id+"_silverlight_container";b.extend(e.style,{position:"absolute",top:"-1000px",background:f.settings.silverlight_bgcolor||"transparent",width:"1px",height:"1px"});e.className="plupload_silverlight";document.body.appendChild(e);e.innerHTML='<object id="'+f.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" width="1" height="1"><param name="source" value="'+f.settings.silverlight_xap_url+'"/><param name="initParams" value="id='+f.id+'"/><param name="onerror" value="onSilverlightError" /></object>';function d(){return document.getElementById(f.id+"_silverlight").content.Upload}f.bind("Silverlight:Init",function(){var g,h={};f.bind("SelectFiles",function(j){var k,l="",m=j.settings.filters;for(k=0;k<m.length;k++){l+=(l!=""?"|":"")+m[k].title+" | "+m[k].extensions}g=[];d().SelectFiles(l,j.settings.multi_selection)});f.bind("Silverlight:SelectFile",function(i,l,j,k){var m;m=b.guid();h[m]=l;h[l]=m;g.push(new b.File(m,j,k))});f.bind("Silverlight:SelectSuccessful",function(){f.trigger("FilesSelected",g)});f.bind("Silverlight:UploadFileProgress",function(i,m,j,l){var k=i.getFile(h[m]);k.loaded=j;i.trigger("UploadProgress",k)});f.bind("Silverlight:UploadChunkSuccessful",function(i,l,j,o,n){var m,k=i.getFile(h[l]);m={file:k,chunk:j,chunks:o,response:n};i.trigger("ChunkUploaded",m);if(m.cancelled){d().CancelUpload();k.status=b.FAILED;i.trigger("FileUploaded",k);return}});f.bind("Silverlight:UploadSuccessful",function(i,k){var j=i.getFile(h[k]);j.status=b.DONE;i.trigger("FileUploaded",j)});f.bind("FileRemoved",function(i,j){d().RemoveFile(h[j.id])});f.bind("UploadFile",function(i,k){var j=i.settings.url;j+=(j.indexOf("?")==-1?"?":"&")+"name="+escape(k.target_name||k.name);d().UploadFile(h[k.id],j,i.settings.chunk_size)})})}})})(plupload);(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(e){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.FlashRuntime=c.addRuntime("flash",{isSupported:function(){return b()>=10},init:function(f){var d,e,h;a[f.id]=f;d=document.getElementById(f.settings.browse_button);e=document.createElement("div");e.id=f.id+"_flash_container";c.extend(e.style,{position:"absolute",background:f.settings.flash_bgcolor||"transparent",width:"100px",height:"100px"});e.className="plupload_flash";document.body.appendChild(e);h="id="+escape(f.id);e.innerHTML='<object id="'+f.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="'+h+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function g(){return document.getElementById(f.id+"_flash")}d=e=null;f.bind("Flash:Init",function(){var i={};g().setFileFilters(f.settings.filters,f.settings.multi_selection);f.bind("UploadFile",function(j,l){var k=j.settings.url;k+=(k.indexOf("?")==-1?"?":"&")+"name="+escape(l.target_name||l.name);g().uploadFile(i[l.id],k,j.settings.chunk_size)});f.bind("Flash:UploadProcess",function(k,j){var l=k.getFile(i[j.id]);l.loaded=j.loaded;k.trigger("UploadProgress",l)});f.bind("Flash:UploadChunkComplete",function(j,l){var m,k=j.getFile(i[l.id]);m={file:k,chunk:l.chunk,chunks:l.chunks,response:l.text};j.trigger("ChunkUploaded",m);if(m.cancelled){g().cancelUpload();k.status=c.FAILED;j.trigger("FileUploaded",k);return}});f.bind("Flash:UploadComplete",function(k,j){var l=k.getFile(i[j.id]);l.status=c.DONE;k.trigger("FileUploaded",l)});f.bind("Flash:SelectFiles",function(j,m){var l,k,n=[],o;for(k=0;k<m.length;k++){l=m[k];o=c.guid();i[o]=l.id;i[l.id]=o;n.push(new c.File(o,l.name,l.size))}f.trigger("FilesSelected",n)});f.bind("QueueChanged",function(j){f.trigger("Flash:PositionAtBrowseButton")});f.bind("FileRemoved",function(j,k){g().removeFile(i[k.id])});f.bind("StateChanged",function(j){f.trigger("Flash:PositionAtBrowseButton")})});f.bind("Flash:PositionAtBrowseButton",function(i){var j,k;j=document.getElementById(i.settings.browse_button);k=c.getPos(j);c.extend(document.getElementById(i.id+"_flash_container").style,{top:k.y+"px",left:k.x+"px",width:j.clientWidth+"px",height:j.clientHeight+"px"})});f.trigger("Flash:PositionAtBrowseButton")}})})(plupload);(function(a){function b(f,d){var c=0,g=0,e;f=f;d=d||document.body;e=f;while(e&&e!=d&&e.nodeType){c+=e.offsetLeft||0;g+=e.offsetTop||0;e=e.offsetParent}r=f.parentNode;while(e&&e!=d&&e.nodeType){c-=e.scrollLeft||0;g-=e.scrollTop||0;e=e.parentNode}return{x:c,y:g}}a.Html5Runtime=a.addRuntime("html5",{isSupported:function(){var c;if(window.XMLHttpRequest){c=new XMLHttpRequest();return !!(c.sendAsBinary||c.upload)}return false},init:function(f){var d,e,g,c={};d=document.getElementById(f.settings.browse_button);e=a.getPos(d);g=document.createElement("div");g.id=f.id+"_html5_container";a.extend(g.style,{position:"absolute",background:f.settings.html5_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",opacity:0});g.className="plupload_html5";document.body.appendChild(g);g.innerHTML='<input id="'+f.id+'_html5" style="width:100%;" type="file" '+(f.settings.multi_selection?'multiple="multiple"':"")+" />";f.bind("HTML5:PositionAtBrowseButton",function(h){var i,j;i=document.getElementById(f.settings.browse_button);j=a.getPos(i);a.extend(document.getElementById(f.id+"_html5_container").style,{top:j.y+"px",left:j.x+"px",width:i.offsetWidth+"px",height:i.offsetHeight+"px"})});f.bind("UploadFile",function(h,k){var l=new XMLHttpRequest(),j,i=h.settings.url;if(k.status==a.DONE||k.status==a.FAILED||h.state==a.STOPPED){return}if(j=l.upload){j.onload=function(){k.status=a.DONE;h.trigger("FileUploaded",k)};j.onprogress=function(m){k.loaded=m.loaded;h.trigger("UploadProgress",k)}}l.onreadystatechange=function(){if(l.readyState==4){k.status=a.DONE;k.loaded=k.size;h.trigger("UploadProgress",k);h.trigger("FileUploaded",k)}};l.open("post",i+(i.indexOf("?")==-1?"?":"&")+"name="+escape(k.target_name||k.name),true);l.setRequestHeader("Content-Type","application/octet-stream");if(l.sendAsBinary){l.sendAsBinary(c[k.id].getAsBinary())}else{l.send(c[k.id])}});document.getElementById(f.id+"_html5").onchange=function(){var j,h,k=[],l;for(h=0;h<this.files.length;h++){j=this.files[h];l=a.guid();c[l]=j;k.push(new a.File(l,j.fileName,j.fileSize))}f.trigger("FilesSelected",k);this.value=""};f.trigger("HTML5:PositionAtBrowseButton")}})})(plupload);