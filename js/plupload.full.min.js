(function(){var d=0,b=[],e={},a={};(function(f){var g=f.split(/,/),h,k,j;for(h=0;h<g.length;h+=2){j=g[h+1].split(/ /);for(k=0;k<j.length;k++){a[j[k]]=g[h]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var c={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,mimeTypes:a,extend:function(j){var g,h,f;for(f=1;f<arguments.length;f++){h=arguments[f];for(g in h){j[g]=h[g]}}return j},cleanName:function(f){var g,h;h=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(g=0;g<h.length;g+=2){f=f.replace(h[g],h[g+1])}f=f.replace(/\s+/g,"_");f=f.replace(/[^a-z0-9_\-\.]+/gi,"");return f},addRuntime:function(f,g){g.name=f;b[f]=g;b.push(g);return g},guid:function(){var f=new Date().getTime().toString(32),g;for(g=0;g<5;g++){f+=Math.floor(Math.random()*65535+d).toString(32)}return f},formatSize:function(f){if(f>1048576){return Math.round(f/1048576,1)+" MB"}if(f>1024){return Math.round(f/1024,1)+" KB"}return f+" b"},getPos:function(i,g){var f=0,j=0,h;i=i;g=g||document.body;h=i;while(h&&h!=g&&h.nodeType){f+=h.offsetLeft||0;j+=h.offsetTop||0;h=h.offsetParent}h=i.parentNode;while(h&&h!=g&&h.nodeType){f-=h.scrollLeft||0;j-=h.scrollTop||0;h=h.parentNode}return{x:f,y:j}},parseSize:function(f){var g;if(typeof(f)=="string"){f=/^([0-9]+)([mgk]+)$/.exec(f.toLowerCase().replace(/[^0-9mkg]/g,""));g=f[2];f=parseInt(f[1]);if(g=="g"){f*=1073741824}if(g=="m"){f*=1048576}if(g=="k"){f*=1024}}return f},xmlEncode:function(h){var g={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},f=/[<>&\"\']/g;return(this.xmlEncode=function(i){return i?(""+i).replace(f,function(j){return g[j]?"&"+g[j]+";":j}):i})(h)},toArray:function(h){var g,f=[];for(g=0;g<h.length;g++){f[g]=h[g]}return f},addI18n:function(f){return plipload.extend(e,f)},translate:function(f){return e[f]||f}};c.Uploader=function(h){var g={},k,j=[],l;k=new c.QueueProgress();h=c.extend({chunk_size:"1mb",max_file_size:"1gb",multi_selection:true},h);function i(){var m;if(this.state==c.STARTED&&l<j.length){m=j[l++];if(m.status==c.QUEUED){this.trigger("UploadFile",m)}else{i.call(this)}}else{this.stop()}}function f(){var m;k.reset();for(m=0;m<j.length;m++){k.size+=j[m].size;k.loaded+=j[m].loaded;if(j[m].status==c.DONE){k.uploaded++}else{if(j[m].status==c.FAILED){k.failed++}else{k.queued++}}}k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):0}c.extend(this,{state:c.STOPPED,files:j,settings:h,total:k,id:c.guid(),init:function(){var r=this,s,o,n,q=0,p;h.page_url=h.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(h.url)){h.url=h.page_url+h.url}h.chunk_size=c.parseSize(h.chunk_size);h.max_file_size=c.parseSize(h.max_file_size);r.bind("FilesSelected",function(t,w){var v,u;for(v=0;v<w.length;v++){u=w[v];u.loaded=0;u.percent=0;if(w[v].size>h.max_file_size){u.status=c.FAILED}else{u.status=c.QUEUED}j.push(u)}r.trigger("QueueChanged")});r.bind("UploadProgress",function(t,u){if(u.status==c.QUEUED){u.status=c.UPLOADING}u.percent=u.size>0?Math.ceil(u.loaded/u.size*100):0;f()});r.bind("QueueChanged",f);r.bind("FileUploaded",function(t,u){u.status=c.DONE;t.trigger("UploadProgress",u);i.call(r)});if(h.runtimes){o=[];p=h.runtimes.split(/,/);for(s=0;s<p.length;s++){o.push(b[p[s]])}}else{o=b}function m(){var t=o[q++];if(t){t.init(r,function(u){if(u.success){r.trigger("Init",t.name);r.refresh()}else{m()}})}}m()},browse:function(m){this.trigger("SelectFiles",c.extend({},h,m))},refresh:function(m){this.trigger("Refresh")},start:function(){if(this.state!=c.STARTED){l=0;this.state=c.STARTED;this.trigger("StateChanged");i.call(this)}},stop:function(){if(this.state!=c.STOPPED){this.state=c.STOPPED;this.trigger("StateChanged")}},getFile:function(n){var m;for(m=j.length-1;m>=0;m--){if(j[m].id===n){return j[m]}}},removeFile:function(n){var m;for(m=j.length-1;m>=0;m--){if(j[m].id===n.id){j.splice(m,1);this.trigger("FileRemoved",n)}}this.trigger("QueueChanged")},removeAll:function(){var n,m;for(n=j.length-1;n>=0;n--){m=j[n];j.splice(n,1);this.trigger("FileRemoved",m)}this.trigger("QueueChanged")},trigger:function(m){var o=g[m.toLowerCase()],n;if(o){arguments[0]=this;for(n=0;n<o.length;n++){if(o[n].func.apply(o[n].scope,arguments)===false){return false}}}return true},bind:function(m,o,n){var p;m=m.toLowerCase();p=g[m]||[];p.push({func:o,scope:n||this});g[m]=p},unbind:function(m,o){var p=g[m.toLowerCase()],n;if(p){for(n=p.length-1;n>=0;n--){if(p[n].func===o){p.splice(n,1)}}}}})};c.File=function(i,g,h){var f=this;f.id=i;f.name=g;f.size=h;f.loaded=0;f.percent=0;f.status=0};c.Runtime=function(){this.init=function(f,g){}};c.QueueProgress=function(){var f=this;f.size=0;f.loaded=0;f.uploaded=0;f.failed=0;f.queued=0;f.percent=0;f.reset=function(){f.size=f.loaded=f.uploaded=f.failed=f.queued=f.percent=0}};window.plupload=c})();(function(a){var b={};a.GearsRuntime=a.addRuntime("gears",{init:function(c,d){if(!window.google||!google.gears){d({success:false});return}c.bind("UploadFile",function(e,i){var h=0,k,j,g=0;j=e.settings.chunk_size;k=Math.ceil(i.size/j);f();function f(){var l=e.settings.url,m,n;if(i.status==a.DONE||i.status==a.FAILED||e.state==a.STOPPED){return}n=Math.min(j,i.size-(h*j));m=google.gears.factory.create("beta.httprequest");m.open("POST",l+(l.indexOf("?")==-1?"?":"&")+"name="+escape(i.target_name||i.name)+"&chunk="+h+"&chunks="+k);m.setRequestHeader("Content-Disposition",'attachment; filename="'+i.name+'"');m.setRequestHeader("Content-Type","application/octet-stream");m.upload.onprogress=function(o){i.loaded=g+o.loaded;e.trigger("UploadProgress",i)};m.onreadystatechange=function(){var o;if(m.readyState==4){if(m.status==200){o={file:i,chunk:h,chunks:k,response:m.responseText};e.trigger("ChunkUploaded",o);if(o.cancelled){i.status=a.FAILED;e.trigger("FileUploaded",i);return}g+=n;if(++h>=k){i.status=a.DONE;e.trigger("FileUploaded",i)}else{f()}}else{e.trigger("UploadChunkError",{file:i,chunk:h,chunks:k,error:"Status: "+m.status})}}};if(h<k){m.send(b[i.id].slice(h*j,n))}}});c.bind("SelectFiles",function(e){var g=google.gears.factory.create("beta.desktop"),j=[],h,f;for(h=0;h<e.settings.filters.length;h++){ext=e.settings.filters[h].extensions.split(",");for(f=0;f<ext.length;f++){j.push("."+ext[f])}}g.openFiles(function(m){var l,k,n=[],o;for(k=0;k<m.length;k++){l=m[k];o=a.guid();b[o]=l.blob;n.push(new a.File(o,l.name,l.blob.length))}c.trigger("FilesSelected",n)},{singleFile:!e.settings.multi_selection,filter:j})});d({success:true})}})})(plupload);(function(b){var a={};function c(n){var p=false;var d=null;try{var j=null;try{j=new ActiveXObject("AgControl.AgControl");if(n==null){p=true}else{if(j.IsVersionSupported(n)){p=true}}j=null}catch(m){var k=navigator.plugins["Silverlight Plug-In"];if(k){if(n===null){p=true}else{var f=k.description;if(f==="1.0.30226.2"){f="2.0.30226.2"}var g=f.split(".");while(g.length>3){g.pop()}while(g.length<4){g.push(0)}var h=n.split(".");while(h.length>4){h.pop()}var o,i,l=0;do{o=parseInt(h[l]);i=parseInt(g[l]);l++}while(l<h.length&&o===i);if(o<=i&&!isNaN(o)){p=true}}}}}catch(m){p=false}return p}b.silverlight={trigger:function(h,e){var g=a[h],f,d;if(g){d=b.toArray(arguments).slice(1);d[0]="Silverlight:"+e;setTimeout(function(){g.trigger.apply(g,d)},0)}}};b.SilverlightRuntime=b.addRuntime("silverlight",{init:function(f,g){var e;if(!c("2.0.31005.0")){g({success:false});return}a[f.id]=f;e=document.createElement("div");e.id=f.id+"_silverlight_container";b.extend(e.style,{position:"absolute",top:"-1000px",background:f.settings.silverlight_bgcolor||"transparent",width:"1px",height:"1px"});e.className="plupload_silverlight";document.body.appendChild(e);e.innerHTML='<object id="'+f.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" width="1" height="1"><param name="source" value="'+f.settings.silverlight_xap_url+'"/><param name="initParams" value="id='+f.id+'"/><param name="onerror" value="onSilverlightError" /></object>';function d(){return document.getElementById(f.id+"_silverlight").content.Upload}f.bind("Silverlight:Init",function(){var h,i={};f.bind("SelectFiles",function(j){var k,l="",m=j.settings.filters;for(k=0;k<m.length;k++){l+=(l!=""?"|":"")+m[k].title+" | *."+m[k].extensions.replace(/,/g,";*.")}h=[];d().SelectFiles(l,j.settings.multi_selection)});f.bind("Silverlight:SelectFile",function(j,m,k,l){var n;n=b.guid();i[n]=m;i[m]=n;h.push(new b.File(n,k,l))});f.bind("Silverlight:SelectSuccessful",function(){f.trigger("FilesSelected",h)});f.bind("Silverlight:UploadFileProgress",function(j,n,k,m){var l=j.getFile(i[n]);l.loaded=k;j.trigger("UploadProgress",l)});f.bind("Silverlight:UploadChunkSuccessful",function(j,m,k,p,o){var n,l=j.getFile(i[m]);n={file:l,chunk:k,chunks:p,response:o};j.trigger("ChunkUploaded",n);if(n.cancelled){d().CancelUpload();l.status=b.FAILED;j.trigger("FileUploaded",l);return}});f.bind("Silverlight:UploadSuccessful",function(j,l){var k=j.getFile(i[l]);k.status=b.DONE;j.trigger("FileUploaded",k)});f.bind("FileRemoved",function(j,k){d().RemoveFile(i[k.id])});f.bind("UploadFile",function(j,l){var k=j.settings.url;k+=(k.indexOf("?")==-1?"?":"&")+"name="+escape(l.target_name||l.name);d().UploadFile(i[l.id],k,j.settings.chunk_size)})});g({success:true})}})})(plupload);(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(e){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.FlashRuntime=c.addRuntime("flash",{init:function(f,k){var j,e,g,d,l=0;if(b()<10){k({success:false});return}a[f.id]=f;j=document.getElementById(f.settings.browse_button);e=document.createElement("div");e.id=f.id+"_flash_container";c.extend(e.style,{position:"absolute",background:f.settings.flash_bgcolor||"transparent",width:"100px",height:"100px"});e.className="plupload_flash";document.body.appendChild(e);g="id="+escape(f.id);e.innerHTML='<object id="'+f.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="'+g+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function i(){return document.getElementById(f.id+"_flash")}function h(){if(l++>5000){k({success:false});return}if(!d){setTimeout(h,1)}}h();j=e=null;f.bind("Flash:Init",function(){var m={};d=true;i().setFileFilters(f.settings.filters,f.settings.multi_selection);f.bind("UploadFile",function(n,p){var o=n.settings.url;o+=(o.indexOf("?")==-1?"?":"&")+"name="+escape(p.target_name||p.name);i().uploadFile(m[p.id],o,n.settings.chunk_size)});f.bind("Flash:UploadProcess",function(o,n){var p=o.getFile(m[n.id]);p.loaded=n.loaded;o.trigger("UploadProgress",p)});f.bind("Flash:UploadChunkComplete",function(n,p){var q,o=n.getFile(m[p.id]);q={file:o,chunk:p.chunk,chunks:p.chunks,response:p.text};n.trigger("ChunkUploaded",q);if(q.cancelled){i().cancelUpload();o.status=c.FAILED;n.trigger("FileUploaded",o);return}});f.bind("Flash:UploadComplete",function(o,n){var p=o.getFile(m[n.id]);p.status=c.DONE;o.trigger("FileUploaded",p)});f.bind("Flash:SelectFiles",function(n,q){var p,o,r=[],s;for(o=0;o<q.length;o++){p=q[o];s=c.guid();m[s]=p.id;m[p.id]=s;r.push(new c.File(s,p.name,p.size))}f.trigger("FilesSelected",r)});f.bind("QueueChanged",function(n){f.trigger("Flash:PositionAtBrowseButton")});f.bind("FileRemoved",function(n,o){i().removeFile(m[o.id])});f.bind("StateChanged",function(n){f.trigger("Flash:PositionAtBrowseButton")});k({success:true})});f.bind("Refresh",function(m){var n,o;n=document.getElementById(m.settings.browse_button);o=c.getPos(n);c.extend(document.getElementById(m.id+"_flash_container").style,{top:o.y+"px",left:o.x+"px",width:n.clientWidth+"px",height:n.clientHeight+"px"})})}})})(plupload);(function(a){a.BrowserPlusRuntime=a.addRuntime("browserplus",{init:function(d,e){var b=window.BrowserPlus,c=[];d.bind("Init",function(){d.bind("SelectFiles",function(g){var f=[],h,l,k=g.settings.filters,j;for(h=0;h<k.length;h++){j=k[h].extensions.split(/,/);for(l=0;l<j.length;l++){f.push(a.mimeTypes[j[l]])}}b.FileBrowse.OpenBrowseDialog({mimeTypes:f},function(o){var n,m,p=[],q;if(o.success){for(m=0;m<o.value.length;m++){n=o.value[m];q=a.guid();c[q]=n;c[n.id]=q;p.push(new a.File(q,n.name,n.size))}d.trigger("FilesSelected",p)}})})});if(b){b.init(function(f){if(f.success){BrowserPlus.require({services:[{service:"FileBrowse"},{service:"DragAndDrop"}]},function(g){if(g.success){e({success:true})}else{e({success:false})}})}else{e({success:false})}})}else{e({success:false})}}})})(plupload);(function(b){function a(h,g,f,i){var d,e,c;d=document.createElement("canvas");d.style.display="none";document.body.appendChild(d);e=d.getContext("2d");c=new Image();c.onload=function(){var l,j,k;scale=Math.min(g/c.width,f/c.height);if(scale<1){l=Math.round(c.width*scale);j=Math.round(c.height*scale)}else{l=c.width;j=c.height}d.width=l;d.height=j;e.drawImage(c,0,0,l,j);i({success:true,data:atob(d.toDataURL("image/jpeg").substring(23))});d.parentNode.removeChild(d)};c.src=h}b.Html5Runtime=b.addRuntime("html5",{init:function(g,h){var d,f,c={};function e(){var i;if(window.XMLHttpRequest){i=new XMLHttpRequest();return !!(i.sendAsBinary||i.upload)}return false}if(!e()){h({success:false});return}g.bind("Init",function(k){var q,j=[],l,p,o=k.settings.filters,n,m;q=document.createElement("div");q.id=k.id+"_html5_container";for(l=0;l<o.length;l++){n=o[l].extensions.split(/,/);for(p=0;p<n.length;p++){m=b.mimeTypes[n[p]];if(m){j.push(m)}}}b.extend(q.style,{position:"absolute",background:g.settings.html5_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",opacity:0});q.className="plupload_html5";document.body.appendChild(q);q.innerHTML='<input id="'+g.id+'_html5" style="width:100%;" type="file" accept="'+j.join(",")+'" '+(g.settings.multi_selection?'multiple="multiple"':"")+" />";document.getElementById(g.id+"_html5").onchange=function(){var s,r,t=[],u;for(r=0;r<this.files.length;r++){s=this.files[r];u=b.guid();c[u]=s;t.push(new b.File(u,s.fileName,s.fileSize))}g.trigger("FilesSelected",t);this.value=""}});g.bind("Refresh",function(i){var j,k;j=document.getElementById(g.settings.browse_button);k=b.getPos(j);b.extend(document.getElementById(g.id+"_html5_container").style,{top:k.y+"px",left:k.x+"px",width:j.offsetWidth+"px",height:j.offsetHeight+"px"})});g.bind("UploadFile",function(j,m){var p=new XMLHttpRequest(),l,k=j.settings.url,n,i,o;if(m.status==b.DONE||m.status==b.FAILED||j.state==b.STOPPED){return}if(l=p.upload){l.onload=function(){m.status=b.DONE;j.trigger("FileUploaded",m)};l.onprogress=function(q){m.loaded=q.loaded;j.trigger("UploadProgress",m)}}p.onreadystatechange=function(){if(p.readyState==4){m.status=b.DONE;m.loaded=m.size;j.trigger("UploadProgress",m);j.trigger("FileUploaded",m)}};p.open("post",k+(k.indexOf("?")==-1?"?":"&")+"name="+escape(m.target_name||m.name),true);p.setRequestHeader("Content-Type","application/octet-stream");o=c[m.id];if(p.sendAsBinary){n=j.settings.image_width;i=j.settings.image_height;if(n||i){a(o.getAsDataURL(),n,n,function(q){if(q.success){p.sendAsBinary(q.data)}else{p.sendAsBinary(o.getAsBinary())}})}else{p.sendAsBinary(o.getAsBinary())}}else{p.send(o)}});h({success:true})}})})(plupload);