(function(){var f=0,c=[],g={},a={};function e(){this.returnValue=false}function b(){this.cancelBubble=true}(function(h){var j=h.split(/,/),k,m,l;for(k=0;k<j.length;k+=2){l=j[k+1].split(/ /);for(m=0;m<l.length;m++){a[l[m]]=j[k]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var d={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,mimeTypes:a,extend:function(l){var j,k,h;for(h=1;h<arguments.length;h++){k=arguments[h];for(j in k){l[j]=k[j]}}return l},cleanName:function(h){var j,k;k=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(j=0;j<k.length;j+=2){h=h.replace(k[j],k[j+1])}h=h.replace(/\s+/g,"_");h=h.replace(/[^a-z0-9_\-\.]+/gi,"");return h},addRuntime:function(h,i){i.name=h;c[h]=i;c.push(i);return i},guid:function(){var h=new Date().getTime().toString(32),j;for(j=0;j<5;j++){h+=Math.floor(Math.random()*65535+f).toString(32)}return h},formatSize:function(h){if(h>1048576){return Math.round(h/1048576,1)+" MB"}if(h>1024){return Math.round(h/1024,1)+" KB"}return h+" b"},getPos:function(k,i){var h=0,l=0,j;k=k;i=i||document.body;j=k;while(j&&j!=i&&j.nodeType){h+=j.offsetLeft||0;l+=j.offsetTop||0;j=j.offsetParent}j=k.parentNode;while(j&&j!=i&&j.nodeType){h-=j.scrollLeft||0;l-=j.scrollTop||0;j=j.parentNode}return{x:h,y:l}},parseSize:function(h){var i;if(typeof(h)=="string"){h=/^([0-9]+)([mgk]+)$/.exec(h.toLowerCase().replace(/[^0-9mkg]/g,""));i=h[2];h=parseInt(h[1]);if(i=="g"){h*=1073741824}if(i=="m"){h*=1048576}if(i=="k"){h*=1024}}return h},xmlEncode:function(j){var i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},h=/[<>&\"\']/g;return(this.xmlEncode=function(k){return k?(""+k).replace(h,function(l){return i[l]?"&"+i[l]+";":l}):k})(j)},toArray:function(k){var j,h=[];for(j=0;j<k.length;j++){h[j]=k[j]}return h},addI18n:function(h){return plipload.extend(g,h)},translate:function(h){return g[h]||h},addEvent:function(i,h,j){if(i.attachEvent){i.attachEvent("on"+h,function(){var k=window.event;if(!k.target){k.target=k.srcElement}k.preventDefault=e;k.stopPropagation=b;j(k)})}else{if(i.addEventListener){i.addEventListener(h,j,false)}}}};d.Uploader=function(j){var i={},m,l=[],n;m=new d.QueueProgress();j=d.extend({chunk_size:"1mb",max_file_size:"1gb",multi_selection:true,image_quality:90},j);function k(){var o;if(this.state==d.STARTED&&n<l.length){o=l[n++];if(o.status==d.QUEUED){this.trigger("UploadFile",o)}else{k.call(this)}}else{this.stop()}}function h(){var o;m.reset();for(o=0;o<l.length;o++){m.size+=l[o].size;m.loaded+=l[o].loaded;if(l[o].status==d.DONE){m.uploaded++}else{if(l[o].status==d.FAILED){m.failed++}else{m.queued++}}}m.percent=m.size>0?Math.ceil(m.loaded/m.size*100):0}d.extend(this,{state:d.STOPPED,features:{},files:l,settings:j,total:m,id:d.guid(),init:function(){var t=this,u,q,p,s=0,r;j.page_url=j.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(j.url)){j.url=j.page_url+j.url}j.chunk_size=d.parseSize(j.chunk_size);j.max_file_size=d.parseSize(j.max_file_size);t.bind("FilesSelected",function(v,y){var x,w;for(x=0;x<y.length;x++){w=y[x];w.loaded=0;w.percent=0;if(y[x].size>j.max_file_size){w.status=d.FAILED}else{w.status=d.QUEUED}l.push(w)}t.trigger("QueueChanged");t.refresh()});t.bind("UploadProgress",function(v,w){if(w.status==d.QUEUED){w.status=d.UPLOADING}w.percent=w.size>0?Math.ceil(w.loaded/w.size*100):0;h()});t.bind("QueueChanged",h);t.bind("FileUploaded",function(v,w){w.status=d.DONE;v.trigger("UploadProgress",w);k.call(t)});if(j.runtimes){q=[];r=j.runtimes.split(/,/);for(u=0;u<r.length;u++){q.push(c[r[u]])}}else{q=c}function o(){var v=q[s++];if(v){v.init(t,function(w){if(w&&w.success){t.trigger("Init",v.name);t.trigger("PostInit");t.refresh()}else{o()}})}}o()},browse:function(o){this.trigger("SelectFiles",d.extend({},j,o))},refresh:function(o){this.trigger("Refresh")},start:function(){if(this.state!=d.STARTED){n=0;this.state=d.STARTED;this.trigger("StateChanged");k.call(this)}},stop:function(){if(this.state!=d.STOPPED){this.state=d.STOPPED;this.trigger("StateChanged")}},getFile:function(p){var o;for(o=l.length-1;o>=0;o--){if(l[o].id===p){return l[o]}}},removeFile:function(p){var o;for(o=l.length-1;o>=0;o--){if(l[o].id===p.id){l.splice(o,1);this.trigger("FileRemoved",p)}}this.trigger("QueueChanged")},removeAll:function(){var p,o;for(p=l.length-1;p>=0;p--){o=l[p];l.splice(p,1);this.trigger("FileRemoved",o)}this.trigger("QueueChanged")},trigger:function(p){var r=i[p.toLowerCase()],q,o;if(r){o=Array.prototype.slice.call(arguments);o[0]=this;for(q=0;q<r.length;q++){if(r[q].func.apply(r[q].scope,o)===false){return false}}}return true},bind:function(o,q,p){var r;o=o.toLowerCase();r=i[o]||[];r.push({func:q,scope:p||this});i[o]=r},unbind:function(o,q){var r=i[o.toLowerCase()],p;if(r){for(p=r.length-1;p>=0;p--){if(r[p].func===q){r.splice(p,1)}}}}})};d.File=function(k,i,j){var h=this;h.id=k;h.name=i;h.size=j;h.loaded=0;h.percent=0;h.status=0};d.Runtime=function(){this.init=function(h,i){}};d.QueueProgress=function(){var h=this;h.size=0;h.loaded=0;h.uploaded=0;h.failed=0;h.queued=0;h.percent=0;h.reset=function(){h.size=h.loaded=h.uploaded=h.failed=h.queued=h.percent=0}};window.plupload=d})();(function(b){var d={},c=true;function a(g,j,e,l,k){var f,h,i;h=google.gears.factory.create("beta.canvas");h.decode(g);scale=Math.min(j/h.width,e/h.height);if(scale<1){j=Math.round(h.width*scale);e=Math.round(h.height*scale)}else{j=h.width;e=h.height}h.resize(j,e);return h.encode(k,{quality:l/100})}b.GearsRuntime=b.addRuntime("gears",{init:function(g,i){var h;if(!window.google||!google.gears){return i({success:false})}try{h=google.gears.factory.create("beta.desktop")}catch(e){return i({success:false})}function f(l){var k,j,m=[],n;for(j=0;j<l.length;j++){k=l[j];n=b.guid();d[n]=k.blob;m.push(new b.File(n,k.name,k.blob.length))}g.trigger("FilesSelected",m)}g.bind("PostInit",function(){var j=document.getElementById(g.settings.drop_element);if(j){b.addEvent(j,"dragover",function(k){k.preventDefault()});b.addEvent(j,"drop",function(l){var k=h.getDragData(l,"application/x-gears-files");if(k){f(k.files)}l.preventDefault()});j=0}});g.bind("UploadFile",function(n,k){var r=0,o,l,m=0,q,p;q=n.settings.image_width;p=n.settings.image_height;l=n.settings.chunk_size;o=Math.ceil(k.size/l);if(/\.(png|jpg|jpeg)$/i.test(k.name)&&(q||p)){d[k.id]=a(d[k.id],q,p,n.settings.image_quality,/\.png$/i.test(k.name)?"image/png":"image/jpeg")}k.size=d[k.id].length;j();function j(){var s=n.settings.url,t,u;if(k.status==b.DONE||k.status==b.FAILED||n.state==b.STOPPED){return}u=Math.min(l,k.size-(r*l));t=google.gears.factory.create("beta.httprequest");t.open("POST",s+(s.indexOf("?")==-1?"?":"&")+"name="+escape(k.target_name||k.name)+"&chunk="+r+"&chunks="+o);t.setRequestHeader("Content-Disposition",'attachment; filename="'+k.name+'"');t.setRequestHeader("Content-Type","application/octet-stream");t.upload.onprogress=function(v){k.loaded=m+v.loaded;n.trigger("UploadProgress",k)};t.onreadystatechange=function(){var v;if(t.readyState==4){if(t.status==200){v={file:k,chunk:r,chunks:o,response:t.responseText};n.trigger("ChunkUploaded",v);if(v.cancelled){k.status=b.FAILED;n.trigger("FileUploaded",k);return}m+=u;if(++r>=o){k.status=b.DONE;n.trigger("FileUploaded",k)}else{j()}}else{n.trigger("UploadChunkError",{file:k,chunk:r,chunks:o,error:"Status: "+t.status})}}};if(r<o){t.send(d[k.id].slice(r*l,u))}}});g.bind("SelectFiles",function(j){var n=[],l,k,m;for(l=0;l<j.settings.filters.length;l++){m=j.settings.filters[l].extensions.split(",");for(k=0;k<m.length;k++){n.push("."+m[k])}}h.openFiles(f,{singleFile:!j.settings.multi_selection,filter:n})});g.features={dragdrop:c,jpgresize:c,pngresize:c,chunks:c};i({success:c})}})})(plupload);(function(b){var a={};function c(n){var p=false;var d=null;try{var j=null;try{j=new ActiveXObject("AgControl.AgControl");if(n==null){p=true}else{if(j.IsVersionSupported(n)){p=true}}j=null}catch(m){var k=navigator.plugins["Silverlight Plug-In"];if(k){if(n===null){p=true}else{var f=k.description;if(f==="1.0.30226.2"){f="2.0.30226.2"}var g=f.split(".");while(g.length>3){g.pop()}while(g.length<4){g.push(0)}var h=n.split(".");while(h.length>4){h.pop()}var o,i,l=0;do{o=parseInt(h[l]);i=parseInt(g[l]);l++}while(l<h.length&&o===i);if(o<=i&&!isNaN(o)){p=true}}}}}catch(m){p=false}return p}b.silverlight={trigger:function(h,e){var g=a[h],f,d;if(g){d=b.toArray(arguments).slice(1);d[0]="Silverlight:"+e;setTimeout(function(){g.trigger.apply(g,d)},0)}}};b.SilverlightRuntime=b.addRuntime("silverlight",{init:function(j,k){var h,f="",g=j.settings.filters,e;if(!c("2.0.31005.0")){k({success:false});return}a[j.id]=j;h=document.createElement("div");h.id=j.id+"_silverlight_container";b.extend(h.style,{position:"absolute",top:"0",background:j.settings.silverlight_bgcolor||"transparent",width:"100px",height:"100px",opacity:0.01});h.className="plupload_silverlight";document.body.appendChild(h);for(e=0;e<g.length;e++){f+=(f!=""?"|":"")+g[e].title+" | *."+g[e].extensions.replace(/,/g,";*.")}h.innerHTML='<object id="'+j.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%"><param name="source" value="'+j.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="id='+j.id+",filter="+f+'"/><param name="onerror" value="onSilverlightError" /></object>';function d(){return document.getElementById(j.id+"_silverlight").content.Upload}j.bind("Silverlight:Init",function(){var i,l={};j.bind("Silverlight:StartSelectFiles",function(m){i=[]});j.bind("Silverlight:SelectFile",function(m,p,n,o){var q;q=b.guid();l[q]=p;l[p]=q;i.push(new b.File(q,n,o))});j.bind("Silverlight:SelectSuccessful",function(){j.trigger("FilesSelected",i)});j.bind("Silverlight:UploadFileProgress",function(m,q,n,p){var o=m.getFile(l[q]);o.size=p;o.loaded=n;m.trigger("UploadProgress",o)});j.bind("Refresh",function(m){var n,o;n=document.getElementById(m.settings.browse_button);o=b.getPos(n);b.extend(document.getElementById(m.id+"_silverlight_container").style,{top:o.y+"px",left:o.x+"px",width:n.clientWidth+"px",height:n.clientHeight+"px"})});j.bind("Silverlight:UploadChunkSuccessful",function(m,p,n,s,r){var q,o=m.getFile(l[p]);q={file:o,chunk:n,chunks:s,response:r};m.trigger("ChunkUploaded",q);if(q.cancelled){d().CancelUpload();o.status=b.FAILED;m.trigger("FileUploaded",o);return}});j.bind("Silverlight:UploadSuccessful",function(m,o){var n=m.getFile(l[o]);n.status=b.DONE;m.trigger("FileUploaded",n)});j.bind("FileRemoved",function(m,n){d().RemoveFile(l[n.id])});j.bind("UploadFile",function(m,o){var n=m.settings.url;n+=(n.indexOf("?")==-1?"?":"&")+"name="+escape(o.target_name||o.name);d().UploadFile(l[o.id],n,m.settings.chunk_size,m.settings.image_width,m.settings.image_height,m.settings.image_quality)});k({success:true})})}})})(plupload);(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(e){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.FlashRuntime=c.addRuntime("flash",{init:function(f,k){var j,e,g,d,l=0;if(b()<10){k({success:false});return}a[f.id]=f;j=document.getElementById(f.settings.browse_button);e=document.createElement("div");e.id=f.id+"_flash_container";c.extend(e.style,{position:"absolute",top:"0px",background:f.settings.flash_bgcolor||"transparent",width:"100%",height:"100%"});e.className="plupload_flash";document.body.appendChild(e);g="id="+escape(f.id);e.innerHTML='<object id="'+f.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="'+g+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function i(){return document.getElementById(f.id+"_flash")}function h(){if(l++>5000){k({success:false});return}if(!d){setTimeout(h,1)}}h();j=e=null;f.bind("Flash:Init",function(){var o={},m,n=f.settings.filters;d=true;for(m=0;m<n.length;m++){n[m].extensions="*."+n[m].extensions.replace(/,/g,";*.")}i().setFileFilters(n,f.settings.multi_selection);f.bind("UploadFile",function(p,r){var s=p.settings,q=s.url;q+=(q.indexOf("?")==-1?"?":"&")+"name="+escape(r.target_name||r.name);i().uploadFile(o[r.id],q,s.chunk_size,s.image_width,s.image_height,s.image_quality)});f.bind("Flash:UploadProcess",function(q,p){var r=q.getFile(o[p.id]);r.loaded=p.loaded;r.size=p.size;q.trigger("UploadProgress",r)});f.bind("Flash:UploadChunkComplete",function(p,r){var s,q=p.getFile(o[r.id]);s={file:q,chunk:r.chunk,chunks:r.chunks,response:r.text};p.trigger("ChunkUploaded",s);if(s.cancelled){i().cancelUpload();q.status=c.FAILED;p.trigger("FileUploaded",q);return}});f.bind("Flash:UploadComplete",function(q,p){var r=q.getFile(o[p.id]);r.status=c.DONE;q.trigger("FileUploaded",r)});f.bind("Flash:SelectFiles",function(p,s){var r,q,t=[],u;for(q=0;q<s.length;q++){r=s[q];u=c.guid();o[u]=r.id;o[r.id]=u;t.push(new c.File(u,r.name,r.size))}f.trigger("FilesSelected",t)});f.bind("QueueChanged",function(p){f.trigger("Flash:PositionAtBrowseButton")});f.bind("FileRemoved",function(p,q){i().removeFile(o[q.id])});f.bind("StateChanged",function(p){f.trigger("Flash:PositionAtBrowseButton")});f.bind("Refresh",function(p){var q,r;q=document.getElementById(p.settings.browse_button);r=c.getPos(q);c.extend(document.getElementById(p.id+"_flash_container").style,{top:r.y+"px",left:r.x+"px",width:q.clientWidth+"px",height:q.clientHeight+"px"})});k({success:true})})}})})(plupload);(function(a){var b=true,c=false;a.BrowserPlusRuntime=a.addRuntime("browserplus",{init:function(i,l){var f=window.BrowserPlus,e={},k,j,h=i.settings;k=h.image_width;j=h.image_height;function d(q){var p,o,m=[],n,r;for(o=0;o<q.length;o++){n=q[o];r=a.guid();e[r]=n;m.push(new a.File(r,n.name,n.size))}if(o){i.trigger("FilesSelected",m)}}if(f){f.init(function(n){var m=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"}];if(k||j){m.push({service:"ImageAlter",version:"4"})}if(n.success){f.require({services:m},function(){if(n.success){g()}else{l()}})}else{l()}})}else{l()}function g(){i.bind("PostInit",function(){var p,n=h.drop_element,r=i.id+"_droptarget",m=document.getElementById(n),o;if(m){function s(u,t){f.DragAndDrop.AddDropTarget({id:u},function(v){f.DragAndDrop.AttachCallbacks({id:u,hover:function(w){if(!w&&t){t()}},drop:function(w){if(t){t()}d(w)}},function(){})})}if(document.attachEvent&&(/MSIE/gi).test(navigator.userAgent)){p=document.createElement("div");p.setAttribute("id",r);a.extend(p.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0});document.body.appendChild(p);a.addEvent(m,"dragenter",function(u){var t,v;t=document.getElementById(n);v=a.getPos(t);a.extend(document.getElementById(r).style,{top:v.y+"px",left:v.x+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"})});function q(){document.getElementById(r).style.top="-1000px"}s(r,q)}else{s(n)}m=dropTarget=0}});i.bind("SelectFiles",function(m){var q=[],o,n,r=m.settings.filters,p;for(o=0;o<r.length;o++){p=r[o].extensions.split(",");for(n=0;n<p.length;n++){q.push(a.mimeTypes[p[n]])}}f.FileBrowse.OpenBrowseDialog({mimeTypes:q},function(s){if(s.success){d(s.value)}})});i.bind("UploadFile",function(m,o){var n=m.settings.url,q=e[o.id];function p(r){o.size=r.size;f.Uploader.upload({url:n+(n.indexOf("?")==-1?"?":"&")+"&multipart=true&name="+escape(o.target_name||o.name),files:{file:r},cookies:document.cookies,progressCallback:function(s){o.loaded=s.fileSent;m.trigger("UploadProgress",o)}},function(s){if(s.success){o.status=a.DONE;m.trigger("FileUploaded",o)}})}if(/\.(png|jpg|jpeg)$/i.test(o.name)&&(k||j)){BrowserPlus.ImageAlter.transform({file:q,quality:m.settings.image_quality,actions:[{scale:{maxwidth:k,maxheight:j}}]},function(r){if(r.success){p(r.value.file)}})}else{p(q)}});i.features={dragdrop:b,jpgresize:b,pngresize:b,chunks:c};l({success:b})}}})})(plupload);(function(b){var c=true;function a(i,l,j,d,k){var f,e,h,g;f=document.createElement("canvas");f.style.display="none";document.body.appendChild(f);e=f.getContext("2d");h=new Image();h.onload=function(){var o,m,n;scale=Math.min(l/h.width,j/h.height);if(scale<1){o=Math.round(h.width*scale);m=Math.round(h.height*scale)}else{o=h.width;m=h.height}f.width=o;f.height=m;e.drawImage(h,0,0,o,m);g=f.toDataURL(d);g=g.substring(g.indexOf("base64,")+7);g=atob(g);f.parentNode.removeChild(f);k({success:true,data:g})};h.src=i}b.Html5Runtime=b.addRuntime("html5",{init:function(h,i){var d={},f;function g(m){var k,j,l=[],n;for(j=0;j<m.length;j++){k=m[j];n=b.guid();d[n]=k;l.push(new b.File(n,k.fileName,k.fileSize))}h.trigger("FilesSelected",l)}function e(){var j;if(window.XMLHttpRequest){j=new XMLHttpRequest();return !!(j.sendAsBinary||j.upload)}return false}if(!e()){i({success:false});return}h.bind("Init",function(k){var q,j=[],l,p,o=k.settings.filters,n,m;q=document.createElement("div");q.id=k.id+"_html5_container";for(l=0;l<o.length;l++){n=o[l].extensions.split(/,/);for(p=0;p<n.length;p++){m=b.mimeTypes[n[p]];if(m){j.push(m)}}}b.extend(q.style,{position:"absolute",background:h.settings.html5_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",opacity:0});q.className="plupload_html5";document.body.appendChild(q);q.innerHTML='<input id="'+h.id+'_html5" style="width:100%;" type="file" accept="'+j.join(",")+'" '+(h.settings.multi_selection?'multiple="multiple"':"")+" />";document.getElementById(h.id+"_html5").onchange=function(){g(this.files);this.value=""}});h.bind("PostInit",function(){var j=document.getElementById(h.settings.drop_element);if(j){b.addEvent(j,"dragover",function(k){k.preventDefault()});b.addEvent(j,"drop",function(l){var k=l.dataTransfer;if(k&&k.files){g(k.files)}l.preventDefault()})}});h.bind("Refresh",function(j){var k,l;k=document.getElementById(h.settings.browse_button);l=b.getPos(k);b.extend(document.getElementById(h.id+"_html5_container").style,{top:l.y+"px",left:l.x+"px",width:k.offsetWidth+"px",height:k.offsetHeight+"px"})});h.bind("UploadFile",function(k,o){var q=new XMLHttpRequest(),n,m=k.settings.url,l,j,p;if(o.status==b.DONE||o.status==b.FAILED||k.state==b.STOPPED){return}if(n=q.upload){n.onload=function(){o.status=b.DONE;k.trigger("FileUploaded",o)};n.onprogress=function(r){o.loaded=r.loaded;k.trigger("UploadProgress",o)}}q.onreadystatechange=function(){if(q.readyState==4){o.status=b.DONE;o.loaded=o.size;k.trigger("UploadProgress",o);k.trigger("FileUploaded",o)}};q.open("post",m+(m.indexOf("?")==-1?"?":"&")+"name="+escape(o.target_name||o.name),true);q.setRequestHeader("Content-Type","application/octet-stream");p=d[o.id];if(q.sendAsBinary){l=k.settings.image_width;j=k.settings.image_height;if(/\.(png|jpg|jpeg)$/i.test(o.name)&&(l||j)){a(p.getAsDataURL(),l,j,/\.png$/i.test(o.name)?"image/png":"image/jpeg",function(r){if(r.success){o.size=r.data.length;q.sendAsBinary(r.data)}else{q.sendAsBinary(p.getAsBinary())}})}else{q.sendAsBinary(p.getAsBinary())}}else{q.send(p)}});f=!!(File&&File.prototype.getAsDataURL);h.features={dragdrop:window.mozInnerScreenX!==undefined,jpgresize:f,pngresize:f,chunks:c};i({success:c})}})})(plupload);