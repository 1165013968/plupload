(function(){var d=0,b=[],e={},a={};(function(f){var g=f.split(/,/),h,k,j;for(h=0;h<g.length;h+=2){j=g[h+1].split(/ /);for(k=0;k<j.length;k++){a[j[k]]=g[h]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var c={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,mimeTypes:a,extend:function(j){var g,h,f;for(f=1;f<arguments.length;f++){h=arguments[f];for(g in h){j[g]=h[g]}}return j},cleanName:function(f){var g,h;h=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(g=0;g<h.length;g+=2){f=f.replace(h[g],h[g+1])}f=f.replace(/\s+/g,"_");f=f.replace(/[^a-z0-9_\-\.]+/gi,"");return f},addRuntime:function(f,g){g.name=f;b[f]=g;b.push(g);return g},guid:function(){var f=new Date().getTime().toString(32),g;for(g=0;g<5;g++){f+=Math.floor(Math.random()*65535+d).toString(32)}return f},formatSize:function(f){if(f>1048576){return Math.round(f/1048576,1)+" MB"}if(f>1024){return Math.round(f/1024,1)+" KB"}return f+" b"},getPos:function(i,g){var f=0,j=0,h;i=i;g=g||document.body;h=i;while(h&&h!=g&&h.nodeType){f+=h.offsetLeft||0;j+=h.offsetTop||0;h=h.offsetParent}h=i.parentNode;while(h&&h!=g&&h.nodeType){f-=h.scrollLeft||0;j-=h.scrollTop||0;h=h.parentNode}return{x:f,y:j}},parseSize:function(f){var g;if(typeof(f)=="string"){f=/^([0-9]+)([mgk]+)$/.exec(f.toLowerCase().replace(/[^0-9mkg]/g,""));g=f[2];f=parseInt(f[1]);if(g=="g"){f*=1073741824}if(g=="m"){f*=1048576}if(g=="k"){f*=1024}}return f},xmlEncode:function(h){var g={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},f=/[<>&\"\']/g;return(this.xmlEncode=function(i){return i?(""+i).replace(f,function(j){return g[j]?"&"+g[j]+";":j}):i})(h)},toArray:function(h){var g,f=[];for(g=0;g<h.length;g++){f[g]=h[g]}return f},addI18n:function(f){return plipload.extend(e,f)},translate:function(f){return e[f]||f}};c.Uploader=function(h){var g={},k,j=[],l;k=new c.QueueProgress();h=c.extend({chunk_size:"1mb",max_file_size:"1gb",multi_selection:true,image_quality:90},h);function i(){var m;if(this.state==c.STARTED&&l<j.length){m=j[l++];if(m.status==c.QUEUED){this.trigger("UploadFile",m)}else{i.call(this)}}else{this.stop()}}function f(){var m;k.reset();for(m=0;m<j.length;m++){k.size+=j[m].size;k.loaded+=j[m].loaded;if(j[m].status==c.DONE){k.uploaded++}else{if(j[m].status==c.FAILED){k.failed++}else{k.queued++}}}k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):0}c.extend(this,{state:c.STOPPED,files:j,settings:h,total:k,id:c.guid(),init:function(){var r=this,s,o,n,q=0,p;h.page_url=h.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(h.url)){h.url=h.page_url+h.url}h.chunk_size=c.parseSize(h.chunk_size);h.max_file_size=c.parseSize(h.max_file_size);r.bind("FilesSelected",function(t,w){var v,u;for(v=0;v<w.length;v++){u=w[v];u.loaded=0;u.percent=0;if(w[v].size>h.max_file_size){u.status=c.FAILED}else{u.status=c.QUEUED}j.push(u)}r.trigger("QueueChanged")});r.bind("UploadProgress",function(t,u){if(u.status==c.QUEUED){u.status=c.UPLOADING}u.percent=u.size>0?Math.ceil(u.loaded/u.size*100):0;f()});r.bind("QueueChanged",f);r.bind("FileUploaded",function(t,u){u.status=c.DONE;t.trigger("UploadProgress",u);i.call(r)});if(h.runtimes){o=[];p=h.runtimes.split(/,/);for(s=0;s<p.length;s++){o.push(b[p[s]])}}else{o=b}function m(){var t=o[q++];if(t){t.init(r,function(u){if(u.success){r.trigger("Init",t.name);r.refresh()}else{m()}})}}m()},browse:function(m){this.trigger("SelectFiles",c.extend({},h,m))},refresh:function(m){this.trigger("Refresh")},start:function(){if(this.state!=c.STARTED){l=0;this.state=c.STARTED;this.trigger("StateChanged");i.call(this)}},stop:function(){if(this.state!=c.STOPPED){this.state=c.STOPPED;this.trigger("StateChanged")}},getFile:function(n){var m;for(m=j.length-1;m>=0;m--){if(j[m].id===n){return j[m]}}},removeFile:function(n){var m;for(m=j.length-1;m>=0;m--){if(j[m].id===n.id){j.splice(m,1);this.trigger("FileRemoved",n)}}this.trigger("QueueChanged")},removeAll:function(){var n,m;for(n=j.length-1;n>=0;n--){m=j[n];j.splice(n,1);this.trigger("FileRemoved",m)}this.trigger("QueueChanged")},trigger:function(m){var o=g[m.toLowerCase()],n;if(o){arguments[0]=this;for(n=0;n<o.length;n++){if(o[n].func.apply(o[n].scope,arguments)===false){return false}}}return true},bind:function(m,o,n){var p;m=m.toLowerCase();p=g[m]||[];p.push({func:o,scope:n||this});g[m]=p},unbind:function(m,o){var p=g[m.toLowerCase()],n;if(p){for(n=p.length-1;n>=0;n--){if(p[n].func===o){p.splice(n,1)}}}}})};c.File=function(i,g,h){var f=this;f.id=i;f.name=g;f.size=h;f.loaded=0;f.percent=0;f.status=0};c.Runtime=function(){this.init=function(f,g){}};c.QueueProgress=function(){var f=this;f.size=0;f.loaded=0;f.uploaded=0;f.failed=0;f.queued=0;f.percent=0;f.reset=function(){f.size=f.loaded=f.uploaded=f.failed=f.queued=f.percent=0}};window.plupload=c})();