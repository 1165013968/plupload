(function(){var f=0,c=[],g={},a={};function e(){this.returnValue=false}function b(){this.cancelBubble=true}(function(h){var j=h.split(/,/),k,m,l;for(k=0;k<j.length;k+=2){l=j[k+1].split(/ /);for(m=0;m<l.length;m++){a[l[m]]=j[k]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var d={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,mimeTypes:a,extend:function(l){var j,k,h;for(h=1;h<arguments.length;h++){k=arguments[h];for(j in k){l[j]=k[j]}}return l},cleanName:function(h){var j,k;k=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(j=0;j<k.length;j+=2){h=h.replace(k[j],k[j+1])}h=h.replace(/\s+/g,"_");h=h.replace(/[^a-z0-9_\-\.]+/gi,"");return h},addRuntime:function(h,i){i.name=h;c[h]=i;c.push(i);return i},guid:function(){var h=new Date().getTime().toString(32),j;for(j=0;j<5;j++){h+=Math.floor(Math.random()*65535+f).toString(32)}return h},formatSize:function(h){if(h>1048576){return Math.round(h/1048576,1)+" MB"}if(h>1024){return Math.round(h/1024,1)+" KB"}return h+" b"},getPos:function(k,i){var h=0,l=0,j;k=k;i=i||document.body;j=k;while(j&&j!=i&&j.nodeType){h+=j.offsetLeft||0;l+=j.offsetTop||0;j=j.offsetParent}j=k.parentNode;while(j&&j!=i&&j.nodeType){h-=j.scrollLeft||0;l-=j.scrollTop||0;j=j.parentNode}return{x:h,y:l}},parseSize:function(h){var i;if(typeof(h)=="string"){h=/^([0-9]+)([mgk]+)$/.exec(h.toLowerCase().replace(/[^0-9mkg]/g,""));i=h[2];h=parseInt(h[1]);if(i=="g"){h*=1073741824}if(i=="m"){h*=1048576}if(i=="k"){h*=1024}}return h},xmlEncode:function(j){var i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},h=/[<>&\"\']/g;return(this.xmlEncode=function(k){return k?(""+k).replace(h,function(l){return i[l]?"&"+i[l]+";":l}):k})(j)},toArray:function(k){var j,h=[];for(j=0;j<k.length;j++){h[j]=k[j]}return h},addI18n:function(h){return plipload.extend(g,h)},translate:function(h){return g[h]||h},addEvent:function(i,h,j){if(i.attachEvent){i.attachEvent("on"+h,function(){var k=window.event;if(!k.target){k.target=k.srcElement}k.preventDefault=e;k.stopPropagation=b;j(k)})}else{if(i.addEventListener){i.addEventListener(h,j,false)}}}};d.Uploader=function(j){var i={},m,l=[],n;m=new d.QueueProgress();j=d.extend({chunk_size:"1mb",max_file_size:"1gb",multi_selection:true,image_quality:90},j);function k(){var o;if(this.state==d.STARTED&&n<l.length){o=l[n++];if(o.status==d.QUEUED){this.trigger("UploadFile",o)}else{k.call(this)}}else{this.stop()}}function h(){var o;m.reset();for(o=0;o<l.length;o++){m.size+=l[o].size;m.loaded+=l[o].loaded;if(l[o].status==d.DONE){m.uploaded++}else{if(l[o].status==d.FAILED){m.failed++}else{m.queued++}}}m.percent=m.size>0?Math.ceil(m.loaded/m.size*100):0}d.extend(this,{state:d.STOPPED,features:{},files:l,settings:j,total:m,id:d.guid(),init:function(){var t=this,u,q,p,s=0,r;j.page_url=j.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(j.url)){j.url=j.page_url+j.url}j.chunk_size=d.parseSize(j.chunk_size);j.max_file_size=d.parseSize(j.max_file_size);t.bind("FilesSelected",function(v,y){var x,w;for(x=0;x<y.length;x++){w=y[x];w.loaded=0;w.percent=0;if(y[x].size>j.max_file_size){w.status=d.FAILED}else{w.status=d.QUEUED}l.push(w)}t.trigger("QueueChanged");t.refresh()});t.bind("UploadProgress",function(v,w){if(w.status==d.QUEUED){w.status=d.UPLOADING}w.percent=w.size>0?Math.ceil(w.loaded/w.size*100):0;h()});t.bind("QueueChanged",h);t.bind("FileUploaded",function(v,w){w.status=d.DONE;v.trigger("UploadProgress",w);k.call(t)});if(j.runtimes){q=[];r=j.runtimes.split(/,/);for(u=0;u<r.length;u++){q.push(c[r[u]])}}else{q=c}function o(){var v=q[s++];if(v){v.init(t,function(w){if(w&&w.success){t.trigger("Init",v.name);t.trigger("PostInit");t.refresh()}else{o()}})}}o()},browse:function(o){this.trigger("SelectFiles",d.extend({},j,o))},refresh:function(o){this.trigger("Refresh")},start:function(){if(this.state!=d.STARTED){n=0;this.state=d.STARTED;this.trigger("StateChanged");k.call(this)}},stop:function(){if(this.state!=d.STOPPED){this.state=d.STOPPED;this.trigger("StateChanged")}},getFile:function(p){var o;for(o=l.length-1;o>=0;o--){if(l[o].id===p){return l[o]}}},removeFile:function(p){var o;for(o=l.length-1;o>=0;o--){if(l[o].id===p.id){l.splice(o,1);this.trigger("FileRemoved",p)}}this.trigger("QueueChanged")},removeAll:function(){var p,o;for(p=l.length-1;p>=0;p--){o=l[p];l.splice(p,1);this.trigger("FileRemoved",o)}this.trigger("QueueChanged")},trigger:function(p){var r=i[p.toLowerCase()],q,o;if(r){o=Array.prototype.slice.call(arguments);o[0]=this;for(q=0;q<r.length;q++){if(r[q].func.apply(r[q].scope,o)===false){return false}}}return true},bind:function(o,q,p){var r;o=o.toLowerCase();r=i[o]||[];r.push({func:q,scope:p||this});i[o]=r},unbind:function(o,q){var r=i[o.toLowerCase()],p;if(r){for(p=r.length-1;p>=0;p--){if(r[p].func===q){r.splice(p,1)}}}}})};d.File=function(k,i,j){var h=this;h.id=k;h.name=i;h.size=j;h.loaded=0;h.percent=0;h.status=0};d.Runtime=function(){this.init=function(h,i){}};d.QueueProgress=function(){var h=this;h.size=0;h.loaded=0;h.uploaded=0;h.failed=0;h.queued=0;h.percent=0;h.reset=function(){h.size=h.loaded=h.uploaded=h.failed=h.queued=h.percent=0}};window.plupload=d})();