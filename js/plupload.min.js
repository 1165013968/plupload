/**
 * Plupload - multi-runtime File Uploader
 * v3.1.1
 *
 * Copyright 2017, Ephox
 * Released under AGPLv3 License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2017-10-03
 */
!function(e,t){var i=function(){var e={};return t.apply(e,arguments),e.plupload};"function"==typeof define&&define.amd?define("plupload",[],i):"object"==typeof module&&module.exports?module.exports=i():e.plupload=i()}(this||window,function(){!function(e,t){"use strict";function i(e,t){for(var i,n=[],o=0;o<e.length;++o){if(i=s[e[o]]||r(e[o]),!i)throw"module definition dependecy not found: "+e[o];n.push(i)}t.apply(null,n)}function n(e,n,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(n===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";i(n,function(){s[e]=r.apply(null,arguments)})}function r(t){for(var i=e,n=t.split(/[.\/]/),r=0;r<n.length;++r){if(!i[n[r]])return;i=i[n[r]]}return i}function o(i){for(var n=0;n<i.length;n++){for(var r=e,o=i[n],a=o.split(/[.\/]/),u=0;u<a.length-1;++u)r[a[u]]===t&&(r[a[u]]={}),r=r[a[u]];r[a[a.length-1]]=s[o]}}var s={};n("moxie/core/utils/Basic",[],function(){function e(e){var t;return e===t?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function t(){return a(!1,!1,arguments)}function i(){return a(!0,!1,arguments)}function n(){return a(!1,!0,arguments)}function r(){return a(!0,!0,arguments)}function o(t){switch(e(t)){case"array":return a(!1,!0,[[],t]);case"object":return a(!1,!0,[{},t]);default:return t}}function s(i){switch(e(i)){case"array":return Array.prototype.slice.call(i);case"object":return t({},i)}return i}function a(t,i,n){var r,o=n[0];return c(n,function(n,u){u>0&&c(n,function(n,u){var c=-1!==f(e(n),["array","object"]);return n===r||t&&o[u]===r?!0:(c&&i&&(n=s(n)),e(o[u])===e(n)&&c?a(t,i,[o[u],n]):o[u]=n,void 0)})}),o}function u(e,t){function i(){this.constructor=e}for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.parent=t.prototype,e}function c(e,t){var i,n,r,o;if(e){try{i=e.length}catch(s){i=o}if(i===o||"number"!=typeof i){for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n)===!1)return}else for(r=0;i>r;r++)if(t(e[r],r)===!1)return}}function l(t){var i;if(!t||"object"!==e(t))return!0;for(i in t)return!1;return!0}function p(t,i){function n(r){"function"===e(t[r])&&t[r](function(e){++r<o&&!e?n(r):i(e)})}var r=0,o=t.length;"function"!==e(i)&&(i=function(){}),t&&t.length||i(),n(r)}function d(e,t){var i=0,n=e.length,r=new Array(n);c(e,function(e,o){e(function(e){if(e)return t(e);var s=[].slice.call(arguments);s.shift(),r[o]=s,i++,i===n&&(r.unshift(null),t.apply(this,r))})})}function f(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i}return-1}function h(t,i){var n=[];"array"!==e(t)&&(t=[t]),"array"!==e(i)&&(i=[i]);for(var r in t)-1===f(t[r],i)&&n.push(t[r]);return n.length?n:!1}function m(e,t){var i=[];return c(e,function(e){-1!==f(e,t)&&i.push(e)}),i.length?i:null}function g(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}function v(e){return e?String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""):e}function y(e){if("string"!=typeof e)return e;var t,i={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9\.]+)([tmgk]?)$/.exec(e.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),t=e[2],e=+e[1],i.hasOwnProperty(t)&&(e*=i[t]),Math.floor(e)}function _(e){var t=[].slice.call(arguments,1);return e.replace(/%([a-z])/g,function(e,i){var n=t.shift();switch(i){case"s":return n+"";case"d":return parseInt(n,10);case"f":return parseFloat(n);case"c":return"";default:return n}})}function E(e,t){var i=this;setTimeout(function(){e.call(i)},t||1)}var b=function(){var e=0;return function(t){var i,n=(new Date).getTime().toString(32);for(i=0;5>i;i++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"o_")+n+(e++).toString(32)}}();return{guid:b,typeOf:e,extend:t,extendIf:i,extendImmutable:n,extendImmutableIf:r,clone:o,inherit:u,each:c,isEmptyObj:l,inSeries:p,inParallel:d,inArray:f,arrayDiff:h,arrayIntersect:m,toArray:g,trim:v,sprintf:_,parseSizeStr:y,delay:E}}),n("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(e){function i(e,t,i){var n=0,r=0,o=0,s={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},a=function(e){return e=(""+e).replace(/[_\-+]/g,"."),e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),e.length?e.split("."):[-8]},u=function(e){return e?isNaN(e)?s[e]||-7:parseInt(e,10):0};for(e=a(e),t=a(t),r=Math.max(e.length,t.length),n=0;r>n;n++)if(e[n]!=t[n]){if(e[n]=u(e[n]),t[n]=u(t[n]),e[n]<t[n]){o=-1;break}if(e[n]>t[n]){o=1;break}}if(!i)return o;switch(i){case">":case"gt":return o>0;case">=":case"ge":return o>=0;case"<=":case"le":return 0>=o;case"==":case"=":case"eq":return 0===o;case"<>":case"!=":case"ne":return 0!==o;case"":case"<":case"lt":return 0>o;default:return null}}var n=function(e){var t="",i="?",n="function",r="undefined",o="object",s="name",a="version",u={has:function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()}},c={rgx:function(){for(var t,i,s,a,u,c,l,p=0,d=arguments;p<d.length;p+=2){var f=d[p],h=d[p+1];if(typeof t===r){t={};for(a in h)u=h[a],typeof u===o?t[u[0]]=e:t[u]=e}for(i=s=0;i<f.length;i++)if(c=f[i].exec(this.getUA())){for(a=0;a<h.length;a++)l=c[++s],u=h[a],typeof u===o&&u.length>0?2==u.length?t[u[0]]=typeof u[1]==n?u[1].call(this,l):u[1]:3==u.length?t[u[0]]=typeof u[1]!==n||u[1].exec&&u[1].test?l?l.replace(u[1],u[2]):e:l?u[1].call(this,l,u[2]):e:4==u.length&&(t[u[0]]=l?u[3].call(this,l.replace(u[1],u[2])):e):t[u]=l?l:e;break}if(c)break}return t},str:function(t,n){for(var r in n)if(typeof n[r]===o&&n[r].length>0){for(var s=0;s<n[r].length;s++)if(u.has(n[r][s],t))return r===i?e:r}else if(u.has(n[r],t))return r===i?e:r;return t}},l={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,a],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[s,a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],a],[/(edge)\/((\d+)?[\w\.]+)/i],[s,a],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],a],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[s,a],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],a],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],a],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[a,[s,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[a,[s,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[a,[s,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[a,c.str,l.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,a]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,a],[/rv\:([\w\.]+).*(gecko)/i],[a,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[a,c.str,l.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[a,c.str,l.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],a],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],a],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],a],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,a],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[s,"iOS"],[a,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,a]]},d=function(e){var i=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:t);this.getBrowser=function(){return c.rgx.apply(this,p.browser)},this.getEngine=function(){return c.rgx.apply(this,p.engine)},this.getOS=function(){return c.rgx.apply(this,p.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this.setUA(i)};return d}(),r=function(){var i={access_global_ns:function(){return!!window.moxie},create_canvas:function(){var e=document.createElement("canvas"),t=!(!e.getContext||!e.getContext("2d"));return i.create_canvas=t,t},filter_by_extension:function(){return!("Chrome"===s.browser&&s.verComp(s.version,28,"<")||"IE"===s.browser&&s.verComp(s.version,10,"<")||"Safari"===s.browser&&s.verComp(s.version,7,"<")||"Firefox"===s.browser&&s.verComp(s.version,37,"<"))},return_response_type:function(t){try{if(-1!==e.inArray(t,["","text","document"]))return!0;if(window.XMLHttpRequest){var i=new XMLHttpRequest;if(i.open("get","/"),"responseType"in i)return i.responseType=t,i.responseType!==t?!1:!0}}catch(n){}return!1},select_file:function(){return s.can("use_fileinput")&&window.File},select_folder:function(){return s.can("select_file")&&("Chrome"===s.browser&&s.verComp(s.version,21,">=")||"Firefox"===s.browser&&s.verComp(s.version,42,">="))},select_multiple:function(){return!(!s.can("select_file")||"Safari"===s.browser&&"Windows"===s.os||"iOS"===s.os&&s.verComp(s.osVersion,"7.0.0",">")&&s.verComp(s.osVersion,"8.0.0","<"))},summon_file_dialog:function(){return s.can("select_file")&&!("Firefox"===s.browser&&s.verComp(s.version,4,"<")||"Opera"===s.browser&&s.verComp(s.version,12,"<")||"IE"===s.browser&&s.verComp(s.version,10,"<"))},use_blob_uri:function(){var e=window.URL;return i.use_blob_uri=e&&"createObjectURL"in e&&"revokeObjectURL"in e&&("IE"!==s.browser||s.verComp(s.version,"11.0.46",">=")),i.use_blob_uri},use_data_uri:function(){var e=new Image;return e.onload=function(){i.use_data_uri=1===e.width&&1===e.height},setTimeout(function(){e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return i.use_data_uri&&("IE"!==s.browser||s.version>=9)},use_data_uri_of:function(e){return i.use_data_uri&&33e3>e||i.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=document.createElement("input");return e.setAttribute("type","file"),i.use_fileinput=!e.disabled},use_webgl:function(){var e,n=document.createElement("canvas"),r=null;try{r=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(o){}return r||(r=null),e=!!r,i.use_webgl=e,n=t,e}};return function(t){var n=[].slice.call(arguments);return n.shift(),"function"===e.typeOf(i[t])?i[t].apply(this,n):!!i[t]}}(),o=(new n).getResult(),s={can:r,uaParser:n,browser:o.browser.name,version:o.browser.version,os:o.os.name,osVersion:o.os.version,verComp:i};return s.OS=s.os,s}),n("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(){var e=function(e){return"string"!=typeof e?e:document.getElementById(e)},t=function(e,t){if(!e.className)return!1;var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return i.test(e.className)},i=function(e,i){t(e,i)||(e.className=e.className?e.className.replace(/\s+$/,"")+" "+i:i)},n=function(e,t){if(e.className){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return" "===t&&" "===i?" ":""})}},r=function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},o=function(e,t){var i,n=0,r=0,o=document;for(e=e,t=t||o.body,i=e;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)n-=i.scrollLeft||0,r-=i.scrollTop||0,i=i.parentNode;return{x:n,y:r}},s=function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}};return{get:e,hasClass:t,addClass:i,removeClass:n,getStyle:r,getPos:o,getSize:s}}),n("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(e){var t={},i="moxie_"+e.guid(),n=function(n,r,o,s){var a;r=r.toLowerCase(),n.addEventListener(r,o,!1),n[i]||(n[i]=e.guid()),t.hasOwnProperty(n[i])||(t[n[i]]={}),a=t[n[i]],a.hasOwnProperty(r)||(a[r]=[]),a[r].push({func:o,key:s})},r=function(n,r,o){var s,a;if(r=r.toLowerCase(),n[i]&&t[n[i]]&&t[n[i]][r]){s=t[n[i]][r];for(var u=s.length-1;u>=0&&(s[u].func!==o&&s[u].key!==o||(n.removeEventListener(r,s[u].func,!1),s[u].func=null,s.splice(u,1),o===a));u--);if(s.length||delete t[n[i]][r],e.isEmptyObj(t[n[i]])){delete t[n[i]];try{delete n[i]}catch(c){n[i]=a}}}},o=function(n,o){n&&n[i]&&e.each(t[n[i]],function(e,t){r(n,t,o)})};return{addEvent:n,removeEvent:r,removeAllEvents:o}}),n("moxie/core/utils/Url",["moxie/core/utils/Basic"],function(e){var t=function(i,n){var r,o=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],s=o.length,a={http:80,https:443},u={},c=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[\da-fA-F:]+\]|[^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,l=c.exec(i||""),p=/^\/\/\w/.test(i);switch(e.typeOf(n)){case"undefined":n=t(document.location.href,!1);break;case"string":n=t(n,!1)}for(;s--;)l[s]&&(u[o[s]]=l[s]);if(r=!p&&!u.scheme,(p||r)&&(u.scheme=n.scheme),r){u.host=n.host,u.port=n.port;var d="";/^[^\/]/.test(u.path)&&(d=n.path,d=/\/[^\/]*\.[^\/]*$/.test(d)?d.replace(/\/[^\/]+$/,"/"):d.replace(/\/?$/,"/")),u.path=d+(u.path||"")}return u.port||(u.port=a[u.scheme]||80),u.port=parseInt(u.port,10),u.path||(u.path="/"),delete u.source,u},i=function(e){var i={http:80,https:443},n="object"==typeof e?e:t(e);return n.scheme+"://"+n.host+(n.port!==i[n.scheme]?":"+n.port:"")+n.path+(n.query?n.query:"")},n=function(e){function i(e){return[e.scheme,e.host,e.port].join("/")}return"string"==typeof e&&(e=t(e)),i(t())===i(e)};return{parseUrl:t,resolveUrl:i,hasSameOrigin:n}}),n("moxie/core/I18n",["moxie/core/utils/Basic"],function(e){var t={};return{addI18n:function(i){return e.extend(t,i)},translate:function(e){return t[e]||e},_:function(e){return this.translate(e)},sprintf:function(t){var i=[].slice.call(arguments,1);return t.replace(/%[a-z]/g,function(){var t=i.shift();return"undefined"!==e.typeOf(t)?t:""})}}}),n("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(e,t){var i="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb xlt xla,application/vnd.ms-powerpoint,ppt pps pot ppa,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",n={},r={},o=function(e){var t,i,o,s=e.split(/,/);for(t=0;t<s.length;t+=2){for(o=s[t+1].split(/ /),i=0;i<o.length;i++)n[o[i]]=s[t];r[s[t]]=o}},s=function(t,i){var n,r,o,s,a=[];for(r=0;r<t.length;r++)for(n=t[r].extensions.toLowerCase().split(/\s*,\s*/),o=0;o<n.length;o++){if("*"===n[o])return[];if(s=a[n[o]],i&&/^\w+$/.test(n[o]))a.push("."+n[o]);else if(s&&-1===e.inArray(s,a))a.push(s);else if(!s)return[]}return a},a=function(t){var i=[];return e.each(t,function(t){if(t=t.toLowerCase(),"*"===t)return i=[],!1;var n=t.match(/^(\w+)\/(\*|\w+)$/);n&&("*"===n[2]?e.each(r,function(e,t){new RegExp("^"+n[1]+"/").test(t)&&[].push.apply(i,r[t])}):r[t]&&[].push.apply(i,r[t]))}),i},u=function(i){var n=[],r=[];return"string"===e.typeOf(i)&&(i=e.trim(i).split(/\s*,\s*/)),r=a(i),n.push({title:t.translate("Files"),extensions:r.length?r.join(","):"*"}),n},c=function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""},l=function(e){return n[c(e)]||""};return o(i),{mimes:n,extensions:r,addMimeType:o,extList2mimes:s,mimes2exts:a,mimes2extList:u,getFileExtension:c,getFileMime:l}}),n("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(e){function t(e,t){var i;for(i in e)if(e[i]===t)return i;return null}return{RuntimeError:function(){function i(e,i){this.code=e,this.name=t(n,e),this.message=this.name+(i||": RuntimeError "+this.code)}var n={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};return e.extend(i,n),i.prototype=Error.prototype,i}(),OperationNotAllowedException:function(){function t(e){this.code=e,this.name="OperationNotAllowedException"}return e.extend(t,{NOT_ALLOWED_ERR:1}),t.prototype=Error.prototype,t}(),ImageError:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": ImageError "+this.code}var n={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return e.extend(i,n),i.prototype=Error.prototype,i}(),FileException:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": FileException "+this.code}var n={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return e.extend(i,n),i.prototype=Error.prototype,i}(),DOMException:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": DOMException "+this.code}var n={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return e.extend(i,n),i.prototype=Error.prototype,i}(),EventException:function(){function t(e){this.code=e,this.name="EventException"}return e.extend(t,{UNSPECIFIED_EVENT_TYPE_ERR:0}),t.prototype=Error.prototype,t}()}}),n("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(e,t,i){function n(){this.uid=i.guid()}var r={};return i.extend(n.prototype,{init:function(){this.uid||(this.uid=i.guid("uid_"))},addEventListener:function(e,t,n,o){var s,a=this;return this.hasOwnProperty("uid")||(this.uid=i.guid("uid_")),e=i.trim(e),/\s/.test(e)?(i.each(e.split(/\s+/),function(e){a.addEventListener(e,t,n,o)}),void 0):(e=e.toLowerCase(),n=parseInt(n,10)||0,s=r[this.uid]&&r[this.uid][e]||[],s.push({fn:t,priority:n,scope:o||this}),r[this.uid]||(r[this.uid]={}),r[this.uid][e]=s,void 0)},hasEventListener:function(e){var t;return e?(e=e.toLowerCase(),t=r[this.uid]&&r[this.uid][e]):t=r[this.uid],t?t:!1},removeEventListener:function(e,t){var n,o,s=this;if(e=e.toLowerCase(),/\s/.test(e))return i.each(e.split(/\s+/),function(e){s.removeEventListener(e,t)}),void 0;if(n=r[this.uid]&&r[this.uid][e]){if(t){for(o=n.length-1;o>=0;o--)if(n[o].fn===t){n.splice(o,1);break}}else n=[];n.length||(delete r[this.uid][e],i.isEmptyObj(r[this.uid])&&delete r[this.uid])}},removeAllEventListeners:function(){r[this.uid]&&delete r[this.uid]},dispatchEvent:function(e){var n,o,s,a,u,c={},l=!0;if("string"!==i.typeOf(e)){if(a=e,"string"!==i.typeOf(a.type))throw new t.EventException(t.EventException.UNSPECIFIED_EVENT_TYPE_ERR);e=a.type,a.total!==u&&a.loaded!==u&&(c.total=a.total,c.loaded=a.loaded),c.async=a.async||!1}if(-1!==e.indexOf("::")?function(t){n=t[0],e=t[1]}(e.split("::")):n=this.uid,e=e.toLowerCase(),o=r[n]&&r[n][e]){o.sort(function(e,t){return t.priority-e.priority}),s=[].slice.call(arguments),s.shift(),c.type=e,s.unshift(c);var p=[];i.each(o,function(e){s[0].target=e.scope,c.async?p.push(function(t){setTimeout(function(){t(e.fn.apply(e.scope,s)===!1)},1)}):p.push(function(t){t(e.fn.apply(e.scope,s)===!1)})}),p.length&&i.inSeries(p,function(e){l=!e})}return l},bindOnce:function(e,t,i,n){var r=this;r.bind.call(this,e,function o(){return r.unbind(e,o),t.apply(this,arguments)},i,n)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(e){var t=this;this.bind(e.join(" "),function(e){var t="on"+e.type.toLowerCase();"function"===i.typeOf(this[t])&&this[t].apply(this,arguments)}),i.each(e,function(e){e="on"+e.toLowerCase(e),"undefined"===i.typeOf(t[e])&&(t[e]=null)})}}),n.instance=new n,n}),n("moxie/file/BlobRef",["moxie/core/utils/Basic"],function(e){function t(n){"object"!==e.typeOf(n)&&"undefined"!==e.typeOf(arguments[1])&&(n=arguments[1]),n||(n={}),e.extend(this,{uid:n.uid||e.guid("uid_"),size:n.size||0,type:n.type||"",slice:function(){return new t(n.slice.apply(n,arguments))},getSource:function(){return i[this.uid]?i[this.uid]:null},destroy:function(){delete i[this.uid]}}),i[this.uid]=n}var i={};return t}),n("moxie/file/FileRef",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/BlobRef"],function(e,t,i){function n(n){"object"!==e.typeOf(n)&&"undefined"!==e.typeOf(arguments[1])&&(n=arguments[1]),i.apply(this,arguments),this.type||(this.type=t.getFileRefMime(n.name));var r;if(n.name)r=n.name.replace(/\\/g,"/"),r=r.substr(r.lastIndexOf("/")+1);else if(this.type){var o=this.type.split("/")[0];r=e.guid((""!==o?o:"file")+"_"),t.extensions[this.type]&&(r+="."+t.extensions[this.type][0])}e.extend(this,{name:r||e.guid("file_"),relativePath:"",lastModifiedDate:n.lastModifiedDate||(new Date).toLocaleString()})}return e.inherit(n,i),n}),n("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/EventTarget","moxie/core/I18n","moxie/file/FileRef"],function(e,i,n,r,o,s,a,u){function c(s){function c(){var t=this,r=n.extList2mimes(d.accept,i.can("filter_by_extension")),o=document.createElement("input");return o.id=g,o.setAttribute("type","file"),o.disabled=!0,d.multiple&&i.can("select_multiple")&&(o.multiple=!0),d.directory&&i.can("select_folder")&&(o.setAttribute("directory","directory"),o.setAttribute("webkitdirectory","webkitdirectory")),r&&o.setAttribute("accept",r.join(",")),e.extend(o.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",fontSize:"999px",opacity:0,cursor:"pointer"}),o.onchange=function s(){if(y.length=0,e.each(this.files,function(e){if(d.directory&&"."==e.name)return!0;var t=new u(null,e);t.relativePath=e.webkitRelativePath?"/"+e.webkitRelativePath.replace(/^\//,""):"",y.push(t)}),"IE"!==i.browser&&"IEMobile"!==i.browser)this.value="";else{var n=this.cloneNode(!0);this.parentNode.replaceChild(n,this),n.onchange=s}y.length&&t.trigger("change",y)},o}function p(){var t;return t=document.createElement("div"),t.id=this.shimid,t.className="mxi-shim",e.extend(t.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t}var d,f,h,m,g=e.guid("mxi_"),v=!0,y=[];if(-1!==e.inArray(e.typeOf(s),["string","node"])&&(d={browse_button:s}),!r.get(s.browse_button))throw new Error("browse_button must be present in the DOM, prior to FileInput instantiation.");d=e.extend({accept:[{title:a.translate("All Files"),extensions:"*"}],multiple:!1},s),"string"==typeof d.accept&&(d.accept=n.mimes2extList(d.accept)),e.extend(this,{uid:g,shimid:g+"_container",files:y,init:function(){var e,t=this,n=r.get(d.container)||document.body,s=r.get(d.browse_button),a=p.call(t),u=c.call(t);f=r.getStyle(n,"position"),h=r.getStyle(s,"position"),m=r.getStyle(s,"z-index")||"auto",(i.can("summon_file_dialog")?u:s).setAttribute("tabindex",-1),e=i.can("summon_file_dialog")?s:a,o.addEvent(e,"mouseover",function(){t.trigger("mouseenter")},g),o.addEvent(e,"mouseout",function(){t.trigger("mouseleave")},g),o.addEvent(e,"mousedown",function(){t.trigger("mousedown")},g),o.addEvent(n,"mouseup",function(){t.trigger("mouseup")},g),i.can("summon_file_dialog")&&("static"===h&&(s.style.position="relative"),o.addEvent(s,"click",function(e){v||u.click(),e.preventDefault()},g)),"static"===f&&(n.style.position="relative"),a.appendChild(u),n.appendChild(a),t.handleEventProps(l),t.disable(!1),t.refresh(),t.trigger({type:"ready",async:!0})},getShimContainer:function(){return r.get(this.shimid)},getOption:function(e){return s[e]},setOption:function(e,t){if(d.hasOwnProperty(e)){var o=d[e],s=r.get(g);switch(e){case"accept":if(t){var a=n.extList2mimes(t,i.can("filter_by_extension"));s.setAttribute("accept",a.join(","))}else s.removeAttribute("accept");break;case"directory":t&&i.can("select_folder")?(s.setAttribute("directory",""),s.setAttribute("webkitdirectory","")):(s.removeAttribute("directory"),s.removeAttribute("webkitdirectory"));break;case"multiple":t&&i.can("select_multiple")?s.setAttribute("multiple",""):s.removeAttribute("multiple");break;case"container":throw new Error("container option cannot be altered.")}d[e]=t,this.trigger("OptionChanged",e,t,o)}},disable:function(e){var i=r.get(g);i&&(i.disabled=v=e===t?!0:e)},refresh:function(){var t=this,n=r.get(d.container)||document.body,o=r.get(d.browse_button),s=t.getShimContainer(),a=parseInt(r.getStyle(o,"z-index"),10)||0;if(o){var u=r.getPos(o,n),c=r.getSize(o);i.can("summon_file_dialog")&&(o.style.zIndex=a+1),s&&e.extend(s.style,{top:u.y+"px",left:u.x+"px",width:c.w+"px",height:c.h+"px",zIndex:a})}t.trigger("Refresh")},destroy:function(){var t=this,i=t.getShimContainer(),n=r.get(d.container),s=r.get(d.browse_button);n&&(o.removeAllEvents(n,g),n.style.position=f),s&&(o.removeAllEvents(s,g),e.extend(s.style,{position:h,zIndex:m})),i&&o.removeAllEvents(i,g),"array"===e.typeOf(y)&&e.each(y,function(e){e.destroy()}),d=null,y.length=0,t.trigger("Destroy"),t.unbindAll()}})}var l=["ready","refresh","optionchange","change","mouseenter","mouseleave","mousedown","mouseup","destroy"];return c.prototype=s.instance,c}),n("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/utils/Basic","moxie/core/utils/Events","moxie/core/utils/Env","moxie/file/FileRef","moxie/core/EventTarget","moxie/core/utils/Mime"],function(e,i,n,r,o,s,a,u){function c(o){function a(e){if(!e.dataTransfer||!e.dataTransfer.types)return!1;var t=n.toArray(e.dataTransfer.types||[]);return-1!==n.inArray("Files",t)||-1!==n.inArray("public.file-url",t)||-1!==n.inArray("application/x-moz-file",t)}function c(e,t){if(d(e)){var i=new s(null,e);i.relativePath=t||"",E.push(i)}}function p(e){for(var t=[],i=0;i<e.length;i++)[].push.apply(t,e[i].extensions.split(/\s*,\s*/));return-1===n.inArray("*",t)?t:[]}function d(e){var t=p(v.accept);if(!t.length)return!0;var i=u.getFileExtension(e.name);return!i||-1!==n.inArray(i,t)}function f(e,t){var i=[];n.each(e,function(e){var t=e.webkitGetAsEntry();t&&(t.isFile?c(e.getAsFile(),t.fullPath):i.push(t))}),i.length?h(i,t):t()}function h(e,t){var i=[];n.each(e,function(e){i.push(function(t){m(e,t)})}),n.inSeries(i,function(){t()})}function m(e,t){e.isFile?e.file(function(i){c(i,e.fullPath),t()},function(){t()}):e.isDirectory?g(e,t):t()}function g(e,t){function i(e){r.readEntries(function(t){t.length?([].push.apply(n,t),i(e)):e()},e)}var n=[],r=e.createReader();i(function(){h(n,t)})}var v,y,_=n.guid("mxi_"),E=[],b=!0;"string"==typeof o&&(v={drop_zone:o}),v=n.extend({accept:[{title:e.translate("All Files"),extensions:"*"}]},o),"string"==typeof v.accept&&(v.accept=u.mimes2extList(v.accept)),n.extend(this,{uid:_,shimid:_+"_container",files:E,init:function(){var e=this,t=i.get(v.drop_zone)||document.body;t.id?e.shimid=t.id:t.id=e.shimid,y=i.getStyle(t,"position"),"static"===y&&(o.drop_zone.style.position="relative"),r.addEvent(t,"dragover",function(e){a(e)&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")},_),r.addEvent(t,"drop",function(t){t.preventDefault(),a(t)&&!b&&(E.length=0,t.dataTransfer.items&&t.dataTransfer.items[0].webkitGetAsEntry?f(t.dataTransfer.items,function(){e.trigger("drop")}):(n.each(t.dataTransfer.files,function(e){c(e)}),e.trigger("drop",E)))},_),r.addEvent(t,"dragenter",function(){e.trigger("dragenter")},_),r.addEvent(t,"dragleave",function(){e.trigger("dragleave")},_),e.handleEventProps(l),e.disable(!1),e.trigger({type:"ready",async:!0})},getShimContainer:function(){return i.get(this.shimid)},getOption:function(e){return o[e]},setOption:function(e,t){if(v.hasOwnProperty(e)){var i=v[e];v[e]=t,this.trigger("OptionChanged",e,t,i)}},disable:function(e){b=e===t?!0:e},destroy:function(){var e=i.get(v.drop_zone)||document.body;r.removeAllEvents(e,_),e.style.position=y,"array"===n.typeOf(E)&&n.each(E,function(e){e.destroy()}),v=null,E.length=0,this.trigger("Destroy"),this.unbindAll()}})}var l=["ready","optionchange","dragenter","dragleave","drop","error","destroy"];return c.prototype=a.instance,c}),n("plupload",["moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/utils/Basic","moxie/core/utils/Events","moxie/core/utils/Url","moxie/core/utils/Mime","moxie/core/I18n","moxie/core/EventTarget","moxie/file/FileInput","moxie/file/FileDrop","moxie/file/BlobRef","moxie/file/FileRef"],function(e,t,i,n,r,o,s,a,u,c,l,p){return{VERSION:"3.1.1",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,OPTION_ERROR:-800,ua:e,typeOf:i.typeOf,clone:i.clone,inherit:i.inherit,extend:i.extend,extendImmutable:i.extendImmutable,extendIf:i.extendIf,inSeries:i.inSeries,inParallel:i.inParallel,guid:i.guid,getAll:function(e){var n,r=[];
"array"!==i.typeOf(e)&&(e=[e]);for(var o=e.length;o--;)n=t.get(e[o]),n&&r.push(n);return r.length?r:null},get:t.get,each:i.each,getPos:t.getPos,getSize:t.getSize,xmlEncode:function(e){var t={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},i=/[<>&\"\']/g;return e?(""+e).replace(i,function(e){return t[e]?"&"+t[e]+";":e}):e},toArray:i.toArray,inArray:i.inArray,addI18n:s.addI18n,translate:s.translate,sprintf:i.sprintf,isEmptyObj:i.isEmptyObj,hasClass:t.hasClass,addClass:t.addClass,removeClass:t.removeClass,getStyle:t.getStyle,addEvent:n.addEvent,removeEvent:n.removeEvent,removeAllEvents:n.removeAllEvents,cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(e,t){var n="";return i.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},formatSize:function(e){function t(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var i=this;if(e=parseInt(e,10),isNaN(e))return i.translate("N/A");var n=Math.pow(1024,4);return e>n?t(e/n,1)+" "+i.translate("tb"):e>(n/=1024)?t(e/n,1)+" "+i.translate("gb"):e>(n/=1024)?t(e/n,1)+" "+i.translate("mb"):e>1024?Math.round(e/1024)+" "+i.translate("kb"):e+" "+i.translate("b")},mimes2extList:o.mimes2extList,resolveUrl:r.resolveUrl,parseSize:i.parseSizeStr,delay:i.delay,EventTarget:a,FileInput:u,FileDrop:c,BlobRef:l,FileRef:p}}),n("plupload/core/Collection",["plupload"],function(){var e=function(){function t(){var e;for(e in n);return n[e]}var i,n={},r=0;plupload.extend(this,{count:function(){return r},hasKey:function(e){return n.hasOwnProperty(e)},get:function(e){return n[e]},first:function(){for(var e in n)return n[e]},last:function(){return i},toObject:function(){return n},add:function(e,t){var o=this;return"object"!=typeof e||t?n.hasOwnProperty(e)?o.update.apply(o,arguments):(n[e]=i=t,r++,void 0):plupload.each(e,function(e,t){o.add(t,e)})},remove:function(e){if(this.hasKey(e)){var o=n[e];delete n[e],r--,i===o&&(i=t())}},extract:function(e){var t=this.get(e);return this.remove(e),t},shift:function(){var e,t,i=this;for(t in n)return e=n[t],i.remove(t),e},update:function(e,t){n[e]=t},each:function(e){plupload.each(n,e)},combineWith:function(){var t=new e;return t.add(n),plupload.each(arguments,function(i){i instanceof e&&t.add(i.toObject())}),t},clear:function(){n={},i=null,r=0}})};return e}),n("plupload/core/ArrCollection",["plupload"],function(e){var t=function(){var t=[];e.extend(this,{count:function(){return t.length},hasKey:function(e){return this.getIdx(e)>-1},get:function(e){var i=this.getIdx(e);return i>-1?t[i]:null},getIdx:function(e){for(var i=0,n=t.length;n>i;i++)if(t[i].uid===e)return i;return-1},getByIdx:function(e){return t[e]},first:function(){return t[0]},last:function(){return t[t.length-1]},add:function(e){e=arguments[1]||e;var i=this.getIdx(e.uid);return i>-1?(t[i]=e,i):(t.push(e),t.length-1)},remove:function(e){return!!this.extract(e)},splice:function(i,n){return i="undefinded"===e.typeOf(i)?0:Math.max(i,0),n="undefinded"!==e.typeOf(n)&&i+n<t.length?n:t.length-i,t.splice(i,n)},extract:function(e){var i=this.getIdx(e);return i>-1?t.splice(i,1):null},shift:function(){return t.shift()},update:function(e,i){var n=this.getIdx(e);return n>-1?(t[n]=i,!0):!1},each:function(i){e.each(t,i)},combineWith:function(){return Array.prototype.concat.apply(this.toArray(),arguments)},sort:function(e){t.sort(e||function(e,t){return e.priority-t.priority})},clear:function(){t=[]},toObject:function(){for(var e={},i=0,n=t.length;n>i;i++)e[t[i].uid]=t[i];return e},toArray:function(){return Array.prototype.slice.call(t)}})};return t}),n("plupload/core/Optionable",["plupload"],function(e){var t=e.EventTarget;return function(t){function i(){t.apply(this,arguments),this._options={}}return e.inherit(i,t),e.extend(i.prototype,{setOption:function(t,i,n){var r,o=this;return"object"==typeof t?(n=i,e.each(t,function(e,t){o.setOption(t,e,n)}),void 0):((!n||o._options.hasOwnProperty(t))&&(r=e.clone(o._options[t]),"object"===e.typeOf(i)&&"object"===e.typeOf(o._options[t])?e.extend(o._options[t],i):o._options[t]=i,o.trigger("OptionChanged",t,i,r)),void 0)},getOption:function(t){if(!t)return this._options;var i=this._options[t];return e.inArray(e.typeOf(i),["array","object"])>-1?e.extendImmutable({},i):i},setOptions:function(e,t){"object"==typeof e&&this.setOption(e,t)},getOptions:function(){return this.getOption()}}),i}(t)}),n("plupload/core/Queueable",["plupload","plupload/core/Optionable"],function(e,t){return function(t){function i(){t.apply(this,arguments),this.uid=e.guid(),this.state=i.IDLE,this.processed=0,this.total=0,this.percent=0,this.retries=0,this.priority=0,this.startedTimestamp=0,this.processedTimestamp=0}return i.IDLE=1,i.PROCESSING=2,i.PAUSED=6,i.RESUMED=7,i.DONE=5,i.FAILED=4,i.DESTROYED=8,e.inherit(i,t),e.extend(i.prototype,{start:function(){var e=this.state;return this.state===i.PROCESSING?!1:(this.startedTimestamp||(this.startedTimestamp=+new Date),this.state=i.PROCESSING,this.trigger("statechanged",this.state,e),this.trigger("started"),!0)},pause:function(){var t=this.state;return-1===e.inArray(this.state,[i.IDLE,i.RESUMED,i.PROCESSING])?!1:(this.processed=this.percent=0,this.loaded=this.processed,this.state=i.PAUSED,this.trigger("statechanged",this.state,t),this.trigger("paused"),!0)},resume:function(){var e=this.state;return this.state!==i.PAUSED&&this.state!==i.RESUMED?!1:(this.state=i.RESUMED,this.trigger("statechanged",this.state,e),this.trigger("resumed"),!0)},stop:function(){var e=this.state;return this.state===i.IDLE?!1:(this.processed=this.percent=0,this.loaded=this.processed,this.startedTimestamp=0,this.state=i.IDLE,this.trigger("statechanged",this.state,e),this.trigger("stopped"),!0)},done:function(e){var t=this.state;return this.state===i.DONE?!1:(this.processed=this.total,this.loaded=this.processed,this.percent=100,this.processedTimestamp=+new Date,this.state=i.DONE,this.trigger("statechanged",this.state,t),this.trigger("done",e),this.trigger("processed"),!0)},failed:function(e){var t=this.state;return this.state===i.FAILED?!1:(this.processed=this.percent=0,this.loaded=this.processed,this.processedTimestamp=+new Date,this.state=i.FAILED,this.trigger("statechanged",this.state,t),this.trigger("failed",e),this.trigger("processed"),!0)},progress:function(e,t){t&&(this.total=t),this.processed=Math.min(e,this.total),this.loaded=this.processed,this.percent=Math.ceil(100*(this.processed/this.total)),this.trigger({type:"progress",loaded:this.processed,total:this.total})},destroy:function(){var e=this.state;return this.state===i.DESTROYED?!1:(this.state=i.DESTROYED,this.trigger("statechanged",this.state,e),this.trigger("destroy"),this.unbindAll(),!0)}}),i}(t)}),n("plupload/core/Stats",[],function(){return function(){var e=this;e.size=0,e.total=0,e.loaded=0,e.uploaded=0,e.done=0,e.failed=0,e.queued=0,e.paused=0,e.processing=0,e.paused=0,e.percent=0,e.bytesPerSec=0,e.processedPerSec=0,e.reset=function(){e.size=e.total=e.loaded=e.processed=e.uploaded=e.done=e.failed=e.queued=e.processing=e.paused=e.percent=e.bytesPerSec=e.processedPerSec=0}}}),n("plupload/core/Queue",["plupload","plupload/core/ArrCollection","plupload/core/Queueable","plupload/core/Stats"],function(e,t,i,n){return function(r){function o(i){r.apply(this,arguments),this._queue=new t,this.stats=new n,this._options=e.extend({},this._options,{max_slots:1,max_retries:0,auto_start:!1,finish_active:!1},i)}function s(){var e;return this.forEachItem(function(t){return t.state===i.IDLE||t.state===i.RESUMED?(e=t,!1):void 0}),e?e:null}function a(){var e;if(this.state!==i.PROCESSING&&this.state!==i.PAUSED)return!1;if(this.stats.processing<this.getOption("max_slots")&&(e=s.call(this))){if(e.trigger("beforestart"))return e.setOptions(this.getOptions()),e.start();e.pause(),a.call(this)}return!1}return e.inherit(o,r),e.extend(o.prototype,{count:function(){return this._queue.count()},start:function(){return o.parent.start.call(this)?a.call(this):!1},pause:function(){return o.parent.pause.call(this)?(this.forEachItem(function(e){e.pause()}),void 0):!1},stop:function(){return!o.parent.stop.call(this)||this.getOption("finish_active")?!1:(this.isActive()&&this.forEachItem(function(e){e.stop()}),void 0)},forEachItem:function(e){this._queue.each(e)},getItem:function(e){return this._queue.get(e)},addItem:function(t){var n=this;t.bind("Started",function(){n.calcStats()&&e.delay.call(n,a)}),t.bind("Resumed",function(){n.start()}),t.bind("Paused",function(){n.calcStats()&&e.delay.call(n,function(){a.call(n)||n.stats.processing||n.pause()})}),t.bind("Processed Stopped",function(){n.calcStats()&&e.delay.call(n,function(){a.call(n)||this.isStopped()||this.isActive()||n.stop()})}),t.bind("Progress",function(){n.calcStats()&&n.trigger("Progress",n.stats.processed,n.stats.total,n.stats)}),t.bind("Failed",function(){n.getOption("max_retries")&&this.retries<n.getOption("max_retries")&&(this.stop(),this.retries++)}),this._queue.add(t.uid,t),this.calcStats(),t.trigger("Queued"),(n.getOption("auto_start")||n.state===i.PAUSED)&&e.delay.call(this,this.start)},extractItem:function(e){var t=this._queue.get(e);return t&&(this.stopItem(t.uid),this._queue.remove(e),this.calcStats()),t},removeItem:function(e){var t=this.extractItem(e);return t?(t.destroy(),!0):!1},stopItem:function(e){var t=this._queue.get(e);return t?t.stop():!1},pauseItem:function(e){var t=this._queue.get(e);return t?t.pause():!1},resumeItem:function(t){var i=this._queue.get(t);return i?(e.delay.call(this,function(){this.start()}),i.resume()):!1},splice:function(e,t){return this._queue.splice(e,t)},isActive:function(){return this.stats&&(this.stats.processing||this.stats.paused)},isStopped:function(){return this.state!==i.IDLE&&this.state!==i.DESTROYED},countSpareSlots:function(){return Math.max(this.getOption("max_slots")-this.stats.processing,0)},toArray:function(){return this._queue.toArray()},clear:function(){var e=this;return e.state!==i.IDLE?(e.bindOnce("Stopped",function(){e.clear()}),e.stop()):(e._queue.clear(),e.stats.reset(),void 0)},calcStats:function(){var e=this,t=e.stats,n=0,r=0;return t?(t.reset(),e.forEachItem(function(o){switch(o.state){case i.DONE:t.done++,t.uploaded=t.done;break;case i.FAILED:t.failed++;break;case i.PROCESSING:t.processing++;break;case i.PAUSED:t.paused++;break;default:t.queued++}n+=o.processed,(!o.processedTimestamp||o.processedTimestamp>e.startedTimestamp)&&(r+=n),t.processedPerSec=Math.ceil(r/((+new Date-e.startedTimestamp||1)/1e3)),t.processed=n,t.total+=o.total,t.total&&(t.percent=Math.ceil(100*(t.processed/t.total)))}),e.percent=t.percent,t.loaded=t.processed,t.size=t.total,t.bytesPerSec=t.processedPerSec,!0):!1},destroy:function(){var t=this;return t.state===i.DESTROYED?!1:t.state!==i.IDLE?(t.bindOnce("Stopped",function(){e.delay.call(t,t.destroy)}),t.stop()):(t.clear(),o.parent.destroy.call(this),t._queue=t.stats=null,!0)}}),o}(i)}),n("plupload/QueueUpload",["plupload","plupload/core/Queue"],function(e,t){return function(i){function n(e){t.call(this,{max_slots:1,max_retries:0,auto_start:!1,finish_active:!1,url:!1,chunk_size:0,multipart:!0,http_method:"POST",params:{},headers:!1,file_data_name:"file",send_file_name:!0,stop_on_fail:!0}),this.setOption=function(e,t){"object"!=typeof e&&"max_upload_slots"==e&&(e="max_slots"),n.prototype.setOption.call(this,e,t,!0)},this.setOptions(e)}return e.inherit(n,i),n}(t)}),n("plupload/QueueResize",["plupload","plupload/core/Queue"],function(e,t){return function(i){function n(e){t.call(this,{max_slots:1,max_retries:0,auto_start:!1,finish_active:!1,resize:{}}),this.setOption=function(e,t){"object"!=typeof e&&"max_resize_slots"==e&&(e="max_slots"),n.prototype.setOption.call(this,e,t,!0)},this.setOptions(e)}return e.inherit(n,i),n}(t)}),n("plupload/ChunkUploader",["plupload","plupload/core/Collection","plupload/core/Queueable"],function(e,t,i){function n(t){function r(t,i){var n="";return e.each(i,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(t+=(t.indexOf("?")>0?"&":"?")+n),t}var o;i.call(this),this._options={file_data_name:"file",headers:!1,http_method:"POST",multipart:!0,params:{},send_file_name:!0,url:!1},e.extend(this,{start:function(){var n,s,a=this,u=this.state,c=a._options;if(this.state===i.PROCESSING)return!1;this.startedTimestamp||(this.startedTimestamp=+new Date),this.state=i.PROCESSING,this.trigger("statechanged",this.state,u),o=new XMLHttpRequest,o.upload&&(o.upload.onprogress=function(e){a.progress(e.loaded,e.total)}),o.onload=function(){var e={response:this.responseText,status:this.status,responseHeaders:this.getAllResponseHeaders()};return this.status<200||this.status>=400?a.failed(e):(a.done(e),void 0)},o.onerror=function(){a.failed()},o.onloadend=function(){setTimeout(function(){o&&("function"==typeof o.destroy&&o.destroy(),o=null)},1)};try{n=c.multipart?c.url:r(c.url,c.params),o.open(c.http_method,n,!0),e.isEmptyObj(c.headers)||e.each(c.headers,function(e,t){o.setRequestHeader(t,e)}),c.multipart?(s=new FormData,e.isEmptyObj(c.params)||e.each(c.params,function(e,t){s.append(t,e)}),s.append(c.file_data_name,t.getSource()),o.send(s)):((e.isEmptyObj(c.headers)||!o.hasRequestHeader("content-type"))&&o.setRequestHeader("content-type","application/octet-stream"),o.send(t.getSource())),this.trigger("started")}catch(l){a.failed()}},stop:function(){o&&(o.abort(),"function"==typeof o.destroy&&o.destroy(),o=null),n.prototype.stop.call(this)},setOption:function(e,t){n.prototype.setOption.call(this,e,t,!0)},setOptions:function(e){n.prototype.setOption.call(this,e,!0)},destroy:function(){this.stop(),n.prototype.destroy.call(this)}})}return e.inherit(n,i),n}),n("plupload/FileUploader",["plupload","plupload/core/Collection","plupload/core/Queueable","plupload/ChunkUploader"],function(e,t,i,n){function r(o,s){function a(){var e=0;return c.each(function(t){t.state===i.DONE&&(e+=t.end-t.start)}),e}function u(){for(var e=0;l>e&&c.hasKey(e);)e++;return e}var c=new t,l=1;i.call(this),this._options={chunk_size:0,params:{},send_file_name:!0,stop_on_fail:!0},e.extend(this,{name:o.name,start:function(){var e,t=this,r=this.state;return this.state===i.PROCESSING?!1:(this.startedTimestamp||(this.startedTimestamp=+new Date),this.state=i.PROCESSING,this.trigger("statechanged",this.state,r),t._options.send_file_name&&(t._options.params.name=t.target_name||t.name),t._options.chunk_size?(l=Math.ceil(o.size/t._options.chunk_size),t.uploadChunk(!1,!0)):(e=new n(o),e.bind("progress",function(e){t.progress(e.loaded,e.total)}),e.bind("done",function(e,i){t.done(i)}),e.bind("failed",function(e,i){t.failed(i)}),e.setOptions(t._options),s.addItem(e)),this.trigger("started"),void 0)},uploadChunk:function(t,r){var p,d,f=this,h=this.getOption("chunk_size"),m={};return m.seq=parseInt(t,10)||u(),m.start=m.seq*h,m.end=Math.min(m.start+h,o.size),m.total=o.size,m.start<0||m.start>=o.size?!1:(d=e.extendImmutable({},this.getOptions(),{params:{chunk:m.seq,chunks:l}}),p=new n(o.slice(m.start,m.end,o.type)),p.bind("progress",function(e){f.progress(a()+e.loaded,o.size)}),p.bind("failed",function(t,n){c.add(m.seq,e.extend({state:i.FAILED},m)),f.trigger("chunkuploadfailed",e.extendImmutable({},m,n)),d.stop_on_fail&&f.failed(n)}),p.bind("done",function(t,n){c.add(m.seq,e.extend({state:i.DONE},m)),f.trigger("chunkuploaded",e.extendImmutable({},m,n)),a()>=o.size?(f.progress(o.size,o.size),f.done(n)):r&&e.delay(function(){f.uploadChunk(u(),r)})}),p.bind("processed",function(){this.destroy()}),p.setOptions(d),c.add(m.seq,e.extend({state:i.PROCESSING},m)),s.addItem(p),r&&s.countSpareSlots()&&f.uploadChunk(u(),r),!0)},destroy:function(){r.prototype.destroy.call(this),c.clear()}})}return e.inherit(r,i),r}),n("plupload/ImageResizer",["plupload","plupload/core/Queueable"],function(e,t){function i(e){t.call(this),this._options={width:0,height:0,type:"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},this.setOption=function(e){("object"==typeof e||this._options.hasOwnProperty(e))&&i.prototype.setOption.apply(this,arguments)},this.start=function(t){var i,r=this;t&&this.setOptions(t.resize),i=new n,i.bind("load",function(){this.resize(r.getOptions())}),i.bind("resize",function(){r.done(this.getAsBlob(r.getOption("type"),r.getOption("quality"))),this.destroy()}),i.bind("error",function(){r.failed(),this.destroy()}),i.load(e,r.getOption("runtimeOptions"))}}var n=e.Image;return e.inherit(i,t),e.Image=n,i}),n("plupload/File",["plupload","plupload/core/Queueable","plupload/FileUploader","plupload/ImageResizer"],function(e,t,i,n){function r(a,u,c){t.call(this),e.extend(this,{id:this.uid,name:a.name,target_name:null,type:a.type,size:a.size,origSize:a.size,start:function(){var i=this.state;return this.state===t.PROCESSING?!1:(this.state=t.PROCESSING,this.trigger("statechanged",this.state,i),this.trigger("started"),!e.isEmptyObj(this._options.resize)&&o(this.type)&&s(a,"send_binary_string")?this.resizeAndUpload():this.upload(),!0)},getSource:function(){return a},getNative:function(){return this.getFile().getSource()},resizeAndUpload:function(){var e=this,t=e.getOptions(),i=new n(a);i.bind("progress",function(t){e.progress(t.loaded,t.total)}),i.bind("done",function(t,i){i=i,e.upload()}),i.bind("failed",function(){e.upload()}),i.setOption("runtimeOptions",{runtime_order:t.runtimes,required_caps:t.required_features,preferred_caps:t.preferred_caps,swf_url:t.flash_swf_url,xap_url:t.silverlight_xap_url}),c.addItem(i)},upload:function(){var e=this,t=new i(a,u);t.bind("paused",function(){e.pause()}),t.bind("resumed",function(){this.start()}),t.bind("started",function(){e.trigger("startupload")}),t.bind("progress",function(t){e.progress(t.loaded,t.total)}),t.bind("done",function(t,i){e.done(i)}),t.bind("failed",function(t,i){e.failed(i)}),t.setOptions(e.getOptions()),t.start()},destroy:function(){r.prototype.destroy.call(this),a=null}})}function o(t){return e.inArray(t,["image/jpeg","image/png"])>-1}function s(t,i){if(t.ruid){var n=e.Runtime.getInfo(t.ruid);if(n)return n.can(i)}return!1}return e.inherit(r,t),r}),n("plupload/Uploader",["plupload","plupload/core/Collection","plupload/core/Queue","plupload/QueueUpload","plupload/QueueResize","plupload/File"],function(e,t,i,n,r,o){function s(t){function c(){this.bind("FilesAdded FilesRemoved",function(e){e.trigger("QueueChanged"),e.refresh()},this,999),this.bind("BeforeUpload",v),this.bind("Stopped",function(e){e.trigger("UploadComplete")}),this.bind("Error",y),this.bind("Destroy",_)}function g(t){var i=this,n=0,r=[];i.getOption("browse_button")&&e.each(i.getOption("browse_button"),function(t){r.push(function(r){var o=new p({accept:i.getOption("filters").mime_types,name:i.getOption("file_data_name"),multiple:i.getOption("multi_selection"),container:i.getOption("container"),browse_button:t});o.onready=function(){n++,w.push(this),r()},o.onchange=function(){i.addFile(this.files)},o.bind("mouseenter mouseleave mousedown mouseup",function(n){R||(i.getOption("browse_button_hover")&&("mouseenter"===n.type?e.addClass(t,i.getOption("browse_button_hover")):"mouseleave"===n.type&&e.removeClass(t,i.getOption("browse_button_hover"))),i.getOption("browse_button_active")&&("mousedown"===n.type?e.addClass(t,i.getOption("browse_button_active")):"mouseup"===n.type&&e.removeClass(t,i.getOption("browse_button_active"))))}),o.bind("mousedown",function(){i.trigger("Browse")}),o.bind("error",function(){o=null,r()}),o.init()})}),i.getOption("drop_element")&&e.each(i.getOption("drop_element"),function(e){r.push(function(t){var r=new d({drop_zone:e});r.onready=function(){n++,x.push(this),t()},r.ondrop=function(){i.addFile(this.files)},r.bind("error",function(){r=null,t()}),r.init()})}),e.inParallel(r,function(){"function"==typeof t&&t(n)})}function v(e,t){if(e.getOption("unique_names")){var i=t.name.match(/\.([^.]+)$/),n="part";i&&(n=i[1]),t.target_name=t.id+"."+n}}function y(t,i){i.code===e.INIT_ERROR?t.destroy():i.code===e.HTTP_ERROR&&t.state==e.STARTED&&t.trigger("CancelUpload")}function _(t){t.forEachItem(function(e){e.destroy()}),e.each(w,function(e){e.destroy()}),e.each(x,function(e){e.destroy()}),w=[],x=[],O=!1,E&&E.destroy(),b&&b.destroy(),I=E=b=null}var E,b,w=[],x=[],O=!1,R=!1,I=a(e.extend({backward_compatibility:!0,chunk_size:0,file_data_name:"file",filters:{mime_types:"*",prevent_duplicates:!1,max_file_size:0},http_method:"POST",max_resize_slots:1,max_retries:0,max_upload_slots:1,multipart:!0,multipart_params:{},multi_selection:!0,params:{},resize:!1,send_chunk_number:!0,send_file_name:!0},t));i.call(this),e.extend(this,{_options:I,id:this.uid,state:e.STOPPED,settings:I,files:[],total:this.stats,init:function(){var t,i,o=this;return t=o.getOption("preinit"),"function"==typeof t?t(o):e.each(t,function(e,t){o.bind(t,e)}),c.call(o),e.each(["container","browse_button","drop_element"],function(t){return null===o.getOption(t)?(i={code:e.INIT_ERROR,message:e.sprintf(e.translate("%s specified, but cannot be found."),t)},!1):void 0}),i?o.trigger("Error",i):o.getOption("browse_button")||o.getOption("drop_element")?(g.call(o,function(t){var i=o.getOption("init"),s=e.extendImmutable({},o.getOption(),{auto_start:!0});"function"==typeof i?i(o):e.each(i,function(e,t){o.bind(t,e)}),t?(O=!0,E=new n(s),b=new r(s),o.trigger("Init"),o.trigger("PostInit")):o.trigger("Error",{code:e.INIT_ERROR,message:e.translate("Init error.")})}),void 0):o.trigger("Error",{code:e.INIT_ERROR,message:e.translate("You must specify either browse_button or drop_element.")})},setOption:function(t,i){return O&&e.inArray(t,["container","browse_button","drop_element","multi_selection"])>-1?this.trigger("Error",{code:e.OPTION_ERROR,message:e.sprintf(e.translate("%s option cannot be changed.")),option:t}):("object"!=typeof t&&(i=u(t,i,this._options),E&&E.setOption(t,i),b&&b.setOption(t,i)),s.prototype.setOption.call(this,t,i),void 0)},refresh:function(){e.each(w,function(e){e.trigger("Refresh")}),this.trigger("Refresh")},stop:function(){s.prototype.stop.call(this)&&this.state!=e.STOPPED&&this.trigger("CancelUpload")},disableBrowse:function(){R=arguments[0]!==l?arguments[0]:!0,e.each(w,function(e){e.disable(R)}),this.trigger("DisableBrowse",R)},getFile:function(e){return this.getItem(e)},addFile:function(t,i){function n(t){t.bind("beforestart",function(e){return a.trigger("BeforeUpload",e.target)}),t.bind("startupload",function(){a.trigger("UploadFile",this)}),t.bind("progress",function(){a.trigger("UploadProgress",this)}),t.bind("done",function(e,t){a.trigger("FileUploaded",this,t)}),t.bind("failed",function(t,i){a.trigger("Error",e.extend({code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:this},i))})}function r(t,i){var n=[];e.each(a.getOption("filters"),function(e,i){m[i]&&n.push(function(n){m[i].call(a,e,t,function(e){n(!e)})})}),e.inParallel(n,i)}function s(t){var l=e.typeOf(t);t instanceof h?u.push(function(s){r(t,function(r){var u;r||(u=new o(t,E,b),i&&(u.name=i),n(u),a.addItem(u),c.push(u),a.trigger("FileFiltered",u)),e.delay(s)})}):t instanceof f?(s(t.getSource()),t.destroy()):-1!==e.inArray(l,["file","blob"])?s(new h(null,t)):"node"===l&&"filelist"===e.typeOf(t.files)?e.each(t.files,s):"array"===l&&(i=null,e.each(t,s))}var a=this,u=[],c=[];s(t),u.length&&e.inParallel(u,function(){c.length&&a.trigger("FilesAdded",c)})},removeFile:function(e){var t=this.extractItem("string"==typeof e?e:e.uid);t&&(this.trigger("FilesRemoved",[t]),t.destroy())},splice:function(){var t=0,n=e.STARTED==this.state,r=i.prototype.splice.apply(this,arguments);if(r.length){for(this.trigger("FilesRemoved",r),n&&this.stop(),t=0;t<r.length;t++)r[t].destroy();n&&this.start()}},dispatchEvent:function(e){var t,i;if(e=e.toLowerCase(),t=this.hasEventListener(e)){t.sort(function(e,t){return t.priority-e.priority}),i=[].slice.call(arguments),i.shift(),i.unshift(this);for(var n=0;n<t.length;n++)if(t[n].fn.apply(t[n].scope,i)===!1)return!1}return!0},bind:function(t,i,n,r){e.Uploader.prototype.bind.call(this,t,i,r,n)}}),I.backward_compatibility&&(this.bind("FilesAdded FilesRemoved",function(e){e.files=e.toArray()},this,999),this.bind("OptionChanged",function(t,i,n){t.settings[i]="object"==typeof n?e.extend({},n):n},this,999))}function a(t){return e.each(t,function(e,i){t[i]=u(i,e,t)}),t}function u(t,i,n){switch(t){case"chunk_size":(i=e.parseSize(i))&&(n.send_file_name=!0);break;case"headers":var r={};return"object"==typeof i&&e.each(i,function(e,t){r[t.toLowerCase()]=e}),r;case"http_method":return"PUT"===i.toUpperCase()?"PUT":"POST";case"filters":return"array"===e.typeOf(i)&&(i={mime_types:i}),i.mime_types&&("string"===e.typeOf(i.mime_types)&&(i.mime_types=e.mimes2extList(i.mime_types)),n.re_ext_filter=function(t){var i=[];return e.each(t,function(t){e.each(t.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?i.push("\\.*"):i.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+i.join("|")+")$","i")}(i.mime_types)),i;case"max_file_size":n&&!n.filters&&(n.filters={}),n.filters.max_file_size=i;break;case"multipart":i||(n.send_file_name=!0);break;case"multipart_params":n.params=n.multipart_params=i;break;case"resize":return i?e.extend({preserve_headers:!0,crop:!1},i):!1;case"prevent_duplicates":n&&!n.filters&&(n.filters={}),n.filters.prevent_duplicates=!!i;break;case"unique_names":i&&(n.send_file_name=!0);break;case"container":case"browse_button":case"drop_element":return"container"===t?e.get(i):e.getAll(i)}return i}function c(e,t){m[e]=t}var l,p=e.FileInput,d=e.FileDrop,f=e.BlobRef,h=e.FileRef,m={};return c("mime_types",function(t,i,n){t.length&&!this.getOption("re_ext_filter").test(i.name)?(this.trigger("Error",{code:e.FILE_EXTENSION_ERROR,message:e.translate("File extension error."),file:i}),n(!1)):n(!0)}),c("max_file_size",function(t,i,n){var r;t=e.parseSize(t),i.size!==r&&t&&i.size>t?(this.trigger("Error",{code:e.FILE_SIZE_ERROR,message:e.translate("File size error."),file:i}),n(!1)):n(!0)}),c("prevent_duplicates",function(t,i,n){var r=this;t&&this.forEachItem(function(t){return i.name===t.name&&i.size===t.size?(r.trigger("Error",{code:e.FILE_DUPLICATE_ERROR,message:e.translate("Duplicate file error."),file:i}),n(!1),void 0):void 0}),n(!0)}),c("prevent_empty",function(t,i,n){t&&!i.size&&i.size!==l?(this.trigger("Error",{code:e.FILE_SIZE_ERROR,message:e.translate("File size error."),file:i}),n(!1)):n(!0)}),s.addFileFilter=c,e.inherit(s,i),e.addFileFilter=c,s}),o(["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Url","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/BlobRef","moxie/file/FileRef","moxie/file/FileInput","moxie/file/FileDrop","plupload","plupload/FileUploader","plupload/File","plupload/Uploader"])}(this)});