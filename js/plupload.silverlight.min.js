(function(b){var a={};function c(n){var p=false;var d=null;try{var j=null;try{j=new ActiveXObject("AgControl.AgControl");if(n==null){p=true}else{if(j.IsVersionSupported(n)){p=true}}j=null}catch(m){var k=navigator.plugins["Silverlight Plug-In"];if(k){if(n===null){p=true}else{var f=k.description;if(f==="1.0.30226.2"){f="2.0.30226.2"}var g=f.split(".");while(g.length>3){g.pop()}while(g.length<4){g.push(0)}var h=n.split(".");while(h.length>4){h.pop()}var o,i,l=0;do{o=parseInt(h[l]);i=parseInt(g[l]);l++}while(l<h.length&&o===i);if(o<=i&&!isNaN(o)){p=true}}}}}catch(m){p=false}return p}b.silverlight={trigger:function(h,e){var g=a[h],f,d;if(g){d=b.toArray(arguments).slice(1);d[0]="Silverlight:"+e;setTimeout(function(){g.trigger.apply(g,d)},0)}}};b.SilverlightRuntime=b.addRuntime("silverlight",{isSupported:function(){return c("2.0.31005.0")},init:function(f){var e;a[f.id]=f;e=document.createElement("div");e.id=f.id+"_silverlight_container";b.extend(e.style,{position:"absolute",top:"-1000px",background:f.settings.silverlight_bgcolor||"transparent",width:"1px",height:"1px"});e.className="plupload_silverlight";document.body.appendChild(e);e.innerHTML='<object id="'+f.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" width="1" height="1"><param name="source" value="'+f.settings.silverlight_xap_url+'"/><param name="initParams" value="id='+f.id+'"/><param name="onerror" value="onSilverlightError" /></object>';function d(){return document.getElementById(f.id+"_silverlight").content.Upload}f.bind("Silverlight:Init",function(){var g,h={};f.bind("SelectFiles",function(j){var k,l="",m=j.settings.filters;for(k=0;k<m.length;k++){l+=(l!=""?"|":"")+m[k].title+" | "+m[k].extensions}g=[];d().SelectFiles(l,j.settings.multi_selection)});f.bind("Silverlight:SelectFile",function(i,l,j,k){var m;m=b.guid();h[m]=l;h[l]=m;g.push(new b.File(m,j,k))});f.bind("Silverlight:SelectSuccessful",function(){f.trigger("FilesSelected",g)});f.bind("Silverlight:UploadFileProgress",function(i,m,j,l){var k=i.getFile(h[m]);k.loaded=j;i.trigger("UploadProgress",k)});f.bind("Silverlight:UploadChunkSuccessful",function(i,l,j,o,n){var m,k=i.getFile(h[l]);m={file:k,chunk:j,chunks:o,response:n};i.trigger("ChunkUploaded",m);if(m.cancelled){d().CancelUpload();k.status=b.FAILED;i.trigger("FileUploaded",k);return}});f.bind("Silverlight:UploadSuccessful",function(i,k){var j=i.getFile(h[k]);j.status=b.DONE;i.trigger("FileUploaded",j)});f.bind("FileRemoved",function(i,j){d().RemoveFile(h[j.id])});f.bind("UploadFile",function(i,k){var j=i.settings.url;j+=(j.indexOf("?")==-1?"?":"&")+"name="+escape(k.target_name||k.name);d().UploadFile(h[k.id],j,i.settings.chunk_size)})})}})})(plupload);