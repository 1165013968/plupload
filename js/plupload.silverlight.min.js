(function(b){var a={};function c(n){var p=false;var d=null;try{var j=null;try{j=new ActiveXObject("AgControl.AgControl");if(n==null){p=true}else{if(j.IsVersionSupported(n)){p=true}}j=null}catch(m){var k=navigator.plugins["Silverlight Plug-In"];if(k){if(n===null){p=true}else{var f=k.description;if(f==="1.0.30226.2"){f="2.0.30226.2"}var g=f.split(".");while(g.length>3){g.pop()}while(g.length<4){g.push(0)}var h=n.split(".");while(h.length>4){h.pop()}var o,i,l=0;do{o=parseInt(h[l]);i=parseInt(g[l]);l++}while(l<h.length&&o===i);if(o<=i&&!isNaN(o)){p=true}}}}}catch(m){p=false}return p}b.silverlight={trigger:function(h,e){var g=a[h],f,d;if(g){d=b.toArray(arguments).slice(1);d[0]="Silverlight:"+e;setTimeout(function(){g.trigger.apply(g,d)},0)}}};b.SilverlightRuntime=b.addRuntime("silverlight",{init:function(f,g){var e;if(!c("2.0.31005.0")){g({success:false});return}a[f.id]=f;e=document.createElement("div");e.id=f.id+"_silverlight_container";b.extend(e.style,{position:"absolute",top:"-1000px",background:f.settings.silverlight_bgcolor||"transparent",width:"1px",height:"1px"});e.className="plupload_silverlight";document.body.appendChild(e);e.innerHTML='<object id="'+f.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" width="1" height="1"><param name="source" value="'+f.settings.silverlight_xap_url+'"/><param name="initParams" value="id='+f.id+'"/><param name="onerror" value="onSilverlightError" /></object>';function d(){return document.getElementById(f.id+"_silverlight").content.Upload}f.bind("Silverlight:Init",function(){var h,i={};f.bind("SelectFiles",function(j){var k,l="",m=j.settings.filters;for(k=0;k<m.length;k++){l+=(l!=""?"|":"")+m[k].title+" | *."+m[k].extensions.replace(/,/g,";*.")}h=[];d().SelectFiles(l,j.settings.multi_selection)});f.bind("Silverlight:SelectFile",function(j,m,k,l){var n;n=b.guid();i[n]=m;i[m]=n;h.push(new b.File(n,k,l))});f.bind("Silverlight:SelectSuccessful",function(){f.trigger("FilesSelected",h)});f.bind("Silverlight:UploadFileProgress",function(j,n,k,m){var l=j.getFile(i[n]);l.loaded=k;j.trigger("UploadProgress",l)});f.bind("Silverlight:UploadChunkSuccessful",function(j,m,k,p,o){var n,l=j.getFile(i[m]);n={file:l,chunk:k,chunks:p,response:o};j.trigger("ChunkUploaded",n);if(n.cancelled){d().CancelUpload();l.status=b.FAILED;j.trigger("FileUploaded",l);return}});f.bind("Silverlight:UploadSuccessful",function(j,l){var k=j.getFile(i[l]);k.status=b.DONE;j.trigger("FileUploaded",k)});f.bind("FileRemoved",function(j,k){d().RemoveFile(i[k.id])});f.bind("UploadFile",function(j,l){var k=j.settings.url;k+=(k.indexOf("?")==-1?"?":"&")+"name="+escape(l.target_name||l.name);d().UploadFile(i[l.id],k,j.settings.chunk_size)})});g({success:true})}})})(plupload);