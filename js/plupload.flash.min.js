(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(e){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.runtimes.Flash=c.addRuntime("flash",{init:function(f,k){var j,e,g,d,l=0;if(b()<10){k({success:false});return}a[f.id]=f;j=document.getElementById(f.settings.browse_button);e=document.createElement("div");e.id=f.id+"_flash_container";c.extend(e.style,{position:"absolute",top:"0px",background:f.settings.flash_bgcolor||"transparent",width:"100%",height:"100%"});e.className="plupload_flash";document.body.appendChild(e);g="id="+escape(f.id);e.innerHTML='<object id="'+f.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="'+g+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function i(){return document.getElementById(f.id+"_flash")}function h(){if(l++>5000){k({success:false});return}if(!d){setTimeout(h,1)}}h();j=e=null;f.bind("Flash:Init",function(){var o={},m,n=f.settings.filters;d=true;for(m=0;m<n.length;m++){n[m].extensions="*."+n[m].extensions.replace(/,/g,";*.")}i().setFileFilters(n,f.settings.multi_selection);f.bind("UploadFile",function(p,r){var s=p.settings,q=s.url;q+=(q.indexOf("?")==-1?"?":"&")+"name="+escape(r.target_name||r.name);i().uploadFile(o[r.id],q,s.chunk_size,s.image_width,s.image_height,s.image_quality)});f.bind("Flash:UploadProcess",function(q,p){var r=q.getFile(o[p.id]);r.loaded=p.loaded;r.size=p.size;q.trigger("UploadProgress",r)});f.bind("Flash:UploadChunkComplete",function(p,r){var s,q=p.getFile(o[r.id]);s={file:q,chunk:r.chunk,chunks:r.chunks,response:r.text};p.trigger("ChunkUploaded",s);if(s.cancelled){i().cancelUpload();q.status=c.FAILED;p.trigger("FileUploaded",q);return}});f.bind("Flash:UploadComplete",function(q,p){var r=q.getFile(o[p.id]);r.status=c.DONE;q.trigger("FileUploaded",r)});f.bind("Flash:SelectFiles",function(p,s){var r,q,t=[],u;for(q=0;q<s.length;q++){r=s[q];u=c.guid();o[u]=r.id;o[r.id]=u;t.push(new c.File(u,r.name,r.size))}f.trigger("FilesAdded",t)});f.bind("QueueChanged",function(p){f.refresh()});f.bind("FilesRemoved",function(p,r){var q;for(q=0;q<r.length;q++){i().removeFile(o[r[q].id])}});f.bind("StateChanged",function(p){f.refresh()});f.bind("Refresh",function(p){var q,r;q=document.getElementById(p.settings.browse_button);r=c.getPos(q);c.extend(document.getElementById(p.id+"_flash_container").style,{top:r.y+"px",left:r.x+"px",width:q.clientWidth+"px",height:q.clientHeight+"px"})});k({success:true})})}})})(plupload);