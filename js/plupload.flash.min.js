(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(e){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.FlashRuntime=c.addRuntime("flash",{init:function(f,k){var j,e,g,d,l=0;if(b()<10){k({success:false});return}a[f.id]=f;j=document.getElementById(f.settings.browse_button);e=document.createElement("div");e.id=f.id+"_flash_container";c.extend(e.style,{position:"absolute",background:f.settings.flash_bgcolor||"transparent",width:"100px",height:"100px"});e.className="plupload_flash";document.body.appendChild(e);g="id="+escape(f.id);e.innerHTML='<object id="'+f.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="'+g+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function i(){return document.getElementById(f.id+"_flash")}function h(){if(l++>5000){k({success:false});return}if(!d){setTimeout(h,1)}}h();j=e=null;f.bind("Flash:Init",function(){var m={};d=true;i().setFileFilters(f.settings.filters,f.settings.multi_selection);f.bind("UploadFile",function(n,p){var o=n.settings.url;o+=(o.indexOf("?")==-1?"?":"&")+"name="+escape(p.target_name||p.name);i().uploadFile(m[p.id],o,n.settings.chunk_size)});f.bind("Flash:UploadProcess",function(o,n){var p=o.getFile(m[n.id]);p.loaded=n.loaded;o.trigger("UploadProgress",p)});f.bind("Flash:UploadChunkComplete",function(n,p){var q,o=n.getFile(m[p.id]);q={file:o,chunk:p.chunk,chunks:p.chunks,response:p.text};n.trigger("ChunkUploaded",q);if(q.cancelled){i().cancelUpload();o.status=c.FAILED;n.trigger("FileUploaded",o);return}});f.bind("Flash:UploadComplete",function(o,n){var p=o.getFile(m[n.id]);p.status=c.DONE;o.trigger("FileUploaded",p)});f.bind("Flash:SelectFiles",function(n,q){var p,o,r=[],s;for(o=0;o<q.length;o++){p=q[o];s=c.guid();m[s]=p.id;m[p.id]=s;r.push(new c.File(s,p.name,p.size))}f.trigger("FilesSelected",r)});f.bind("QueueChanged",function(n){f.trigger("Flash:PositionAtBrowseButton")});f.bind("FileRemoved",function(n,o){i().removeFile(m[o.id])});f.bind("StateChanged",function(n){f.trigger("Flash:PositionAtBrowseButton")});k({success:true})});f.bind("Refresh",function(m){var n,o;n=document.getElementById(m.settings.browse_button);o=c.getPos(n);c.extend(document.getElementById(m.id+"_flash_container").style,{top:o.y+"px",left:o.x+"px",width:n.clientWidth+"px",height:n.clientHeight+"px"})})}})})(plupload);