(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(e){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.FlashRuntime=c.addRuntime("flash",{isSupported:function(){return b()>=10},init:function(f){var d,e,h;a[f.id]=f;d=document.getElementById(f.settings.browse_button);e=document.createElement("div");e.id=f.id+"_flash_container";c.extend(e.style,{position:"absolute",background:f.settings.flash_bgcolor||"transparent",width:"100px",height:"100px"});e.className="plupload_flash";document.body.appendChild(e);h="id="+escape(f.id);e.innerHTML='<object id="'+f.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="'+h+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function g(){return document.getElementById(f.id+"_flash")}d=e=null;f.bind("Flash:Init",function(){var i={};g().setFileFilters(f.settings.filters,f.settings.multi_selection);f.bind("UploadFile",function(j,l){var k=j.settings.url;k+=(k.indexOf("?")==-1?"?":"&")+"name="+escape(l.target_name||l.name);g().uploadFile(i[l.id],k,j.settings.chunk_size)});f.bind("Flash:UploadProcess",function(k,j){var l=k.getFile(i[j.id]);l.loaded=j.loaded;k.trigger("UploadProgress",l)});f.bind("Flash:UploadChunkComplete",function(j,l){var m,k=j.getFile(i[l.id]);m={file:k,chunk:l.chunk,chunks:l.chunks,response:l.text};j.trigger("ChunkUploaded",m);if(m.cancelled){g().cancelUpload();k.status=c.FAILED;j.trigger("FileUploaded",k);return}});f.bind("Flash:UploadComplete",function(k,j){var l=k.getFile(i[j.id]);l.status=c.DONE;k.trigger("FileUploaded",l)});f.bind("Flash:SelectFiles",function(j,m){var l,k,n=[],o;for(k=0;k<m.length;k++){l=m[k];o=c.guid();i[o]=l.id;i[l.id]=o;n.push(new c.File(o,l.name,l.size))}f.trigger("FilesSelected",n)});f.bind("QueueChanged",function(j){f.trigger("Flash:PositionAtBrowseButton")});f.bind("FileRemoved",function(j,k){g().removeFile(i[k.id])});f.bind("StateChanged",function(j){f.trigger("Flash:PositionAtBrowseButton")})});f.bind("Flash:PositionAtBrowseButton",function(i){var j,k;j=document.getElementById(i.settings.browse_button);k=c.getPos(j);c.extend(document.getElementById(i.id+"_flash_container").style,{top:k.y+"px",left:k.x+"px",width:j.clientWidth+"px",height:j.clientHeight+"px"})});f.trigger("Flash:PositionAtBrowseButton")}})})(plupload);